"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[923],{9066:function(e,l,t){t.r(l),t.d(l,{default:function(){return O}});var i=t(6252),o=t(9963),a=t(3577),s=t(2381);const r=(0,i._)("i",{class:"bx bx-check-circle"},null,-1),n=(0,i._)("i",{class:"bx bx-check-circle"},null,-1),d=(0,i._)("i",{class:"bx bx-check-circle"},null,-1),u=(0,i._)("div",{class:"mt-4"},null,-1),c=(0,i._)("i",{class:"bx bx-check-circle"},null,-1),m={class:"list-unstyled mb-0",id:"dropzone-preview2"},p={class:"mt-2",id:"dropzone-preview-list2"},f={class:"d-flex p-2"},g=(0,i._)("div",{class:"flex-shrink-0 me-3"},[(0,i._)("div",{class:"avatar-sm bg-light rounded"},[(0,i._)("img",{class:"img-fluid rounded d-block",src:s,alt:"Dropzone-Image"})])],-1),w={class:"flex-grow-1"},h={class:"pt-1"},_={class:"fs-md mb-1"},y={class:"fs-sm text-muted mb-0"},b=(0,i._)("strong",{class:"error text-danger"},null,-1),D={class:"flex-shrink-0 ms-3"};function W(e,l,t,s,W,F){const k=(0,i.up)("PageHeader"),v=(0,i.up)("BCol"),x=(0,i.up)("BRow"),z=(0,i.up)("BCardHeader"),C=(0,i.up)("ckeditor"),M=(0,i.up)("BCardBody"),U=(0,i.up)("BCard"),S=(0,i.up)("Multiselect"),B=(0,i.up)("DropZone"),V=(0,i.up)("BButton"),A=(0,i.up)("Layout");return(0,i.wg)(),(0,i.j4)(A,null,{default:(0,i.w5)((()=>[(0,i.Wm)(k,{title:W.title,items:W.items},null,8,["title","items"]),(0,i._)("form",{class:"needs-validation",onSubmit:l[6]||(l[6]=(0,o.iM)(((...e)=>F.submit&&F.submit(...e)),["prevent"]))},[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{lg:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(U,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(z,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{sm:"7"},{default:(0,i.w5)((()=>[r,(0,i.Uk)("   Titulo ")])),_:1})])),_:1})])),_:1}),(0,i.Wm)(M,null,{default:(0,i.w5)((()=>[(0,i.Wm)(C,{modelValue:W.news.title,"onUpdate:modelValue":l[0]||(l[0]=e=>W.news.title=e),editor:W.editor_title},null,8,["modelValue","editor"])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(v,{lg:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(U,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(z,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{sm:"7"},{default:(0,i.w5)((()=>[n,(0,i.Uk)("   Descripción ")])),_:1})])),_:1})])),_:1}),(0,i.Wm)(M,null,{default:(0,i.w5)((()=>[(0,i.Wm)(C,{modelValue:W.news.description,"onUpdate:modelValue":l[1]||(l[1]=e=>W.news.description=e),editor:W.editor_description},null,8,["modelValue","editor"])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(v,{lg:"3"},{default:(0,i.w5)((()=>[(0,i.Wm)(U,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(z,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{sm:"7"},{default:(0,i.w5)((()=>[d,(0,i.Uk)("   Titulo ")])),_:1})])),_:1})])),_:1}),(0,i.Wm)(M,null,{default:(0,i.w5)((()=>[(0,i.Wm)(S,{modelValue:W.news.category,"onUpdate:modelValue":l[2]||(l[2]=e=>W.news.category=e),options:W.categories,required:"",class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])),_:1}),u])),_:1}),(0,i.Wm)(v,{lg:"9"},{default:(0,i.w5)((()=>[(0,i.Wm)(U,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(z,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{sm:"7"},{default:(0,i.w5)((()=>[c,(0,i.Uk)("   Cargar imagen ")])),_:1})])),_:1})])),_:1}),(0,i.Wm)(M,null,{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(B,{files:"files",cloudIcon:"remix",dropzoneFile:"galleryDropzoneFile",isMultiple:!0,onDrop:l[3]||(l[3]=(0,o.iM)((e=>F.galleryDrop(e)),["prevent"])),onChange:F.gallerySelectedFile,onDragenter:l[4]||(l[4]=(0,o.iM)((()=>{}),["prevent"])),onDragover:l[5]||(l[5]=(0,o.iM)((()=>{}),["prevent"]))},null,8,["onChange"])]),(0,i._)("ul",m,[(0,i._)("li",p,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(W.galleryFiles,((e,l)=>((0,i.wg)(),(0,i.iD)("div",{class:"border rounded mb-1",key:l},[(0,i._)("div",f,[g,(0,i._)("div",w,[(0,i._)("div",h,[(0,i._)("h5",_,"   "+(0,a.zw)(e.name),1),(0,i._)("p",y,[(0,i._)("strong",null,(0,a.zw)(e.size/1024),1),(0,i.Uk)(" KB ")]),b])]),(0,i._)("div",D,[(0,i.Wm)(V,{size:"sm",variant:"danger",onClick:()=>F.deleteRecord(e)},{default:(0,i.w5)((()=>[(0,i.Uk)("Delete")])),_:2},1032,["onClick"])])])])))),128))])])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i.Wm)(V,{type:"submit",variant:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)("Submit")])),_:1})])),_:1})])),_:1})],32)])),_:1})}t(560);var F=t(4e3),k=t.n(F),v=t(5234),x=t.n(v),z=t(3081),C=t(4642),M=t(1022),U=t(381),S=t.n(U),B=t(7091),V={components:{ckeditor:k().component,Layout:C.Z,PageHeader:M.Z,DropZone:z.Z,Multiselect:B.Z},data(){return{title:"NUEVA NOTICIA",items:[{text:"Noticias",href:"/news/create"},{text:"Nueva Noticia",active:!0}],dPDefaultDate:null,galleryDropzoneFile:"",galleryFiles:[],categories:["RECURSOS HUMANOS","MASIVOS","PLANTA EXTERNA","CONTABILIDAD","FLM"],DropFile:[],editor_title:x(),editor_description:x(),news:{}}},async created(){this.initForm()},methods:{initForm(){const e=JSON.parse(localStorage.getItem("user"));this.news={title:"",description:"",date:S()().format("YYYY-MM-DD HH:mm:ss"),user_id:e.id,category:null},this.dPDefaultDate=null,this.galleryDropzoneFile="",this.galleryFiles=[],this.DropFile=[]},deleteRecord(e){console.log("call Delet"),e.id&&(this.galleryFiles=this.galleryFiles.filter((l=>l.id!=e.id)))},galleryDrop(e){e.preventDefault(),this.galleryDropzoneFile=e.dataTransfer.files,this.galleryFiles.push(this.galleryDropzoneFile)},gallerySelectedFile(){this.galleryDropzoneFile=document.querySelector(".galleryDropzoneFile").files,this.DropFile.push(this.galleryDropzoneFile);const e=Object.values(this.galleryDropzoneFile).map((e=>({name:e.name,lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,webkitRelativePath:e.webkitRelativePath,size:e.size})));this.galleryFiles.push(...e),this.galleryFiles=this.galleryFiles.map(((e,l)=>({id:l+1,...e})))},async submit(){let e=new FormData;if(Object.keys(this.news).forEach((l=>{e.append(l,this.news[l])})),this.DropFile&&this.DropFile.length>0)for(let l=0;l<this.DropFile.length;l++)e.append("files[]",this.DropFile[l][0]);console.log(e),this.$http.post(this.$apiURL+"news/store",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{200==e.status&&(console.log(e),this.$swal({title:"Completado!",text:e.data.message,icon:"success",confirmButtonColor:"#6457A2"}),setTimeout((()=>{window.location.reload()}),2e3))})).catch((e=>{console.error(e),this.$swal({icon:"error",title:"Oops...",text:e})}))}},middleware:"authentication"},A=t(3744);const N=(0,A.Z)(V,[["render",W]]);var O=N}}]);
//# sourceMappingURL=923.e06ef95c.js.map