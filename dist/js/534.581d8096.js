"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[534],{1022:function(e,l,t){t.d(l,{Z:function(){return p}});var a=t(6252),r=t(3577);const s={class:"page-title-box d-flex align-items-center justify-content-between"},o={class:"mb-0"},u={class:"page-title-right"};function n(e,l,t,n,d,i){const m=(0,a.up)("b-breadcrumb"),p=(0,a.up)("BCol"),c=(0,a.up)("BRow");return(0,a.wg)(),(0,a.j4)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a._)("h4",o,(0,r.zw)(t.title),1),(0,a._)("div",u,[(0,a.Wm)(m,{items:t.items,class:"m-0"},null,8,["items"])])])])),_:1})])),_:1})}var d={props:{title:{type:String,default:""},items:{type:Array,default:()=>[]}}},i=t(3744);const m=(0,i.Z)(d,[["render",n]]);var p=m},3014:function(e,l,t){t.r(l),t.d(l,{default:function(){return A}});var a=t(6252),r=t(9963),s=t(3577);const o=(0,a._)("i",{class:"bx bx-check-circle"},null,-1),u={class:"mt-4"},n={class:"mt-4"},d={class:"mt-4"},i={class:"mt-4"},m={class:"mt-4"},p={class:"mt-4"},c={class:"mt-4"},w={class:"input-group"},f={class:"mt-4"},h={class:"mt-3 text-end"};function g(e,l,t,g,_,b){const W=(0,a.up)("PageHeader"),v=(0,a.up)("BCol"),y=(0,a.up)("BRow"),V=(0,a.up)("BCardHeader"),C=(0,a.up)("BFormInput"),U=(0,a.up)("BFormGroup"),A=(0,a.up)("BButton"),M=(0,a.up)("BInputGroupAppend"),P=(0,a.up)("Multiselect"),$=(0,a.up)("BCardBody"),I=(0,a.up)("BCard"),x=(0,a.up)("Layout");return(0,a.wg)(),(0,a.j4)(x,null,{default:(0,a.w5)((()=>[(0,a.Wm)(W,{title:_.title,items:e.items},null,8,["title","items"]),(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{cols:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{"no-body":""},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{sm:"7"},{default:(0,a.w5)((()=>[o,(0,a.Uk)("   Registrar usuario ")])),_:1})])),_:1})])),_:1}),(0,a.Wm)($,null,{default:(0,a.w5)((()=>[(0,a._)("form",{autocomplete:"off",class:"row no-gutters",onSubmit:l[12]||(l[12]=(0,r.iM)(((...l)=>e.submit&&e.submit(...l)),["prevent"]))},[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{lg:"3"},{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a.Wm)(U,{id:"email-group",label:"Nombre Completo",class:"mb-3","label-for":"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{id:"name",modelValue:_.user.Nombres,"onUpdate:modelValue":l[0]||(l[0]=e=>_.user.Nombres=e),type:"text",required:"",placeholder:"Ingresar Nombres",onInput:l[1]||(l[1]=e=>b.generateUsername())},null,8,["modelValue"])])),_:1})])])),_:1}),(0,a.Wm)(v,{lg:"3"},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a.Wm)(U,{id:"email-group",label:"Apellido Paterno",class:"mb-3","label-for":"paterno"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{id:"paterno",modelValue:_.user.Apellido_Paterno,"onUpdate:modelValue":l[2]||(l[2]=e=>_.user.Apellido_Paterno=e),type:"text",required:"",placeholder:"Ingresar Apellido Paterno",onInput:l[3]||(l[3]=e=>b.generateUsername())},null,8,["modelValue"])])),_:1})])])),_:1}),(0,a.Wm)(v,{lg:"3"},{default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a.Wm)(U,{id:"email-group",label:"Apellido Materno",class:"mb-3","label-for":"materno"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{id:"materno",modelValue:_.user.Apellido_Materno,"onUpdate:modelValue":l[4]||(l[4]=e=>_.user.Apellido_Materno=e),type:"text",required:"",placeholder:"Ingresar Apellido Materno"},null,8,["modelValue"])])),_:1})])])),_:1}),(0,a.Wm)(v,{lg:"3"},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a.Wm)(U,{id:"email-group",label:"DNI",class:"mb-3","label-for":"dni"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{id:"dni",modelValue:_.user.Dni,"onUpdate:modelValue":l[5]||(l[5]=e=>_.user.Dni=e),type:"text",placeholder:"Ingresar DNI",required:"",onInput:l[6]||(l[6]=e=>b.generateUsername())},null,8,["modelValue"])])),_:1})])])),_:1}),(0,a.Wm)(v,{lg:"3"},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a.Wm)(U,{label:"Correo","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{id:"email",modelValue:_.user.email,"onUpdate:modelValue":l[7]||(l[7]=e=>_.user.email=e),type:"email",placeholder:"Ingresar Correo",required:""},null,8,["modelValue"])])),_:1})])])),_:1}),(0,a.Wm)(v,{lg:"3"},{default:(0,a.w5)((()=>[(0,a._)("div",p,[(0,a.Wm)(U,{id:"email-group",label:"Usuario",class:"mb-3","label-for":"username"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{id:"username",modelValue:_.user.username,"onUpdate:modelValue":l[8]||(l[8]=e=>_.user.username=e),type:"text",placeholder:"Ingresar usuario",required:""},null,8,["modelValue"])])),_:1})])])),_:1}),(0,a.Wm)(v,{lg:"3"},{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a.Wm)(U,{id:"password-group",label:"Contraseña",class:"mb-3","label-for":"password"},{default:(0,a.w5)((()=>[(0,a._)("div",w,[(0,a.Wm)(C,{id:"password",modelValue:_.user.password,"onUpdate:modelValue":l[9]||(l[9]=e=>_.user.password=e),type:_.showPassword?"text":"password",placeholder:"Ingresar contraseña",class:(0,s.C_)({"is-invalid":_.submitted&&g.v$.user.password.$error})},null,8,["modelValue","type","class"]),(0,a.Wm)(M,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,{variant:"outline-secondary",onClick:l[10]||(l[10]=e=>_.showPassword=!_.showPassword)},{default:(0,a.w5)((()=>[(0,a._)("i",{class:(0,s.C_)("bx "+(_.showPassword?"bx-show":"bx-hide"))},null,2)])),_:1})])),_:1})]),(0,a.Wm)(A,{variant:"secondary",onClick:b.generatePassword},{default:(0,a.w5)((()=>[(0,a.Uk)("Generar Contraseña")])),_:1},8,["onClick"])])),_:1})])])),_:1}),(0,a.Wm)(v,{lg:"3"},{default:(0,a.w5)((()=>[(0,a._)("div",f,[(0,a.Wm)(U,{label:"Rol","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{modelValue:_.user.role_id,"onUpdate:modelValue":l[11]||(l[11]=e=>_.user.role_id=e),required:"",options:_.roles.map((e=>({value:e.id,label:e.description}))),class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])])),_:1})])),_:1}),(0,a._)("div",h,[(0,a.Wm)(A,{variant:"primary",class:"w-sm",onClick:b.tryToRegisterIn},{default:(0,a.w5)((()=>[(0,a.Uk)("Registrar ")])),_:1},8,["onClick"])])],32)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}t(560);var _=t(5705),b=t(7091),W=t(4642),v=t(1022),y=t(760),V={components:{Multiselect:b.Z,Layout:W.Z,PageHeader:v.Z},setup(){return{v$:(0,_.Xw)()}},data(){return{user:{username:"user.name",Nombres:null,Apellido_Paterno:null,Apellido_Materno:null,Dni:null,password:"",role_id:"",email:null},passwordGenerated:!1,roles:[],showPassword:!1,submitted:!1,tryingToRegister:!1,isRegisterError:!1,title:"NUEVO USUARIO"}},validations(){return{user:{username:{required:y.C1},password:{required:y.C1,strongPassword:this.strongPassword}}}},mounted(){this.getRol()},methods:{generateUsername(){if(this.user.Nombres&&this.user.Apellido_Paterno&&this.user.Dni){const e=this.user.Nombres.charAt(0),l=this.user.Apellido_Paterno,t=this.user.Dni.slice(0,2);this.user.username=`${e}${l}${t}`.toLowerCase()}},generatePassword(){const e="abcdefghijklmnopqrstuvwxyz",l="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="0123456789",a="!@#$%^&*";let r="";r+=e[Math.floor(Math.random()*e.length)],r+=l[Math.floor(Math.random()*l.length)],r+=t[Math.floor(Math.random()*t.length)],r+=a[Math.floor(Math.random()*a.length)];const s=e+l+t+a;for(let o=r.length;o<10;o++)r+=s[Math.floor(Math.random()*s.length)];r=r.split("").sort((()=>.5-Math.random())).join(""),this.user.password=r,this.passwordGenerated=!0},strongPassword(e){const l=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;return l.test(e)},async getRol(){try{const e=await this.$http.get(this.$apiURL+"role/all"),l=e.data.data;l.forEach((e=>{this.roles.push(e)})),console.log(this.roles)}catch(e){console.error("Error fetching roles:",e)}},tryToRegisterIn(){if(this.submitted=!0,this.v$.$touch(),!this.v$.$invalid){const{username:e,password:l}=this.user;e&&l&&this.$http.post(this.$apiURL+"user/store",this.user,{}).then((e=>{200==e.status&&(this.$swal({title:"Completado!",text:e.data.message,icon:"success",confirmButtonColor:"#6457A2"}),setTimeout((()=>{window.location.reload()}),2e3))})).catch((e=>{console.error(e),this.$swal({icon:"error",title:"Oops...",text:e})}))}}}},C=t(3744);const U=(0,C.Z)(V,[["render",g]]);var A=U}}]);
//# sourceMappingURL=534.581d8096.js.map