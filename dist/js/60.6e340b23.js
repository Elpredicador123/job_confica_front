"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[60],{2013:function(e,t,l){l.r(t),l.d(t,{default:function(){return F}});var a=l(6252),i=l(9963),n=l(3577);const s={class:"app-calendar"},o={class:"mb-3"},d=(0,a._)("label",{for:"name",class:"form-label"},"Event Name",-1),r={key:0,class:"invalid-feedback"},c={class:"mb-3"},u=(0,a._)("label",{class:"control-label form-label"},"Category",-1),v=["value"],m={key:0,class:"invalid-feedback"},h={class:"text-end pt-5 mt-3"},p={class:"mb-3"},b=(0,a._)("label",{for:"name",class:"form-label"},"Event Name",-1),f={class:"mb-3"},w=(0,a._)("label",{class:"control-label form-label"},"Category",-1),y=["value"],g={class:"d-flex justify-content-between"},_={class:"d-flex"};function C(e,t,l,C,k,M){const E=(0,a.up)("PageHeader"),D=(0,a.up)("FullCalendar"),W=(0,a.up)("BCardBody"),$=(0,a.up)("BCard"),B=(0,a.up)("BCol"),U=(0,a.up)("BRow"),S=(0,a.up)("BButton"),Z=(0,a.up)("BForm"),x=(0,a.up)("BModal"),V=(0,a.up)("b-button"),T=(0,a.up)("Layout");return(0,a.wg)(),(0,a.j4)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,{title:k.title,items:k.items},null,8,["title","items"]),(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(B,{cols:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)($,{"np-body":""},{default:(0,a.w5)((()=>[(0,a.Wm)(W,null,{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a.Wm)(D,{ref:"fullCalendar",options:k.calendarOptions},null,8,["options"])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(x,{modelValue:k.showModal,"onUpdate:modelValue":t[2]||(t[2]=e=>k.showModal=e),title:"Add New Event","title-class":"font-18","body-class":"p-3","hide-footer":""},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{onSubmit:(0,i.iM)(M.handleSubmit,["prevent"])},{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(B,{cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",o,[d,(0,a.wy)((0,a._)("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>k.event.title=e),type:"text",class:(0,n.C_)(["form-control",{"is-invalid":k.submitted&&C.v$.event.title.$error}]),placeholder:"Insert Event name"},null,2),[[i.nr,k.event.title]]),k.submitted&&C.v$.event.title.required.$invalid?((0,a.wg)(),(0,a.iD)("div",r," This value is required. ")):(0,a.kq)("",!0)])])),_:1}),(0,a.Wm)(B,{cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",c,[u,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>k.event.category=e),class:(0,n.C_)(["form-control",{"is-invalid":k.submitted&&C.v$.event.category.errors}]),name:"category"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.categories,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.backgroundColor,value:`${e.value}`},(0,n.zw)(e.name),9,v)))),128))],2),[[i.bM,k.event.category]]),k.submitted&&C.v$.event.category.$invalid?((0,a.wg)(),(0,a.iD)("div",m," This value is required. ")):(0,a.kq)("",!0)])])),_:1})])),_:1}),(0,a._)("div",h,[(0,a.Wm)(S,{variant:"light",onClick:M.hideModal},{default:(0,a.w5)((()=>[(0,a.Uk)("Close")])),_:1},8,["onClick"]),(0,a.Wm)(S,{type:"submit",variant:"success",class:"ms-1"},{default:(0,a.w5)((()=>[(0,a.Uk)("Create event")])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["modelValue"]),(0,a.Wm)(x,{modelValue:k.eventModal,"onUpdate:modelValue":t[6]||(t[6]=e=>k.eventModal=e),title:"Edit Event","title-class":"font-18","hide-footer":"","body-class":"p-3"},{default:(0,a.w5)((()=>[(0,a._)("form",{onSubmit:t[5]||(t[5]=(0,i.iM)(((...e)=>M.editSubmit&&M.editSubmit(...e)),["prevent"]))},[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(B,{cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",p,[b,(0,a.wy)((0,a._)("input",{id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>k.editevent.editTitle=e),type:"text",class:"form-control",placeholder:"Insert Event name"},null,512),[[i.nr,k.editevent.editTitle]])])])),_:1}),(0,a.Wm)(B,{cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",f,[w,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>k.editevent.editcategory=e),class:"form-control",name:"category"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.categories,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.backgroundColor,value:`${e.value}`},(0,n.zw)(e.name),9,y)))),128))],512),[[i.bM,k.editevent.editcategory]])])])),_:1})])),_:1}),(0,a._)("div",g,[(0,a.Wm)(S,{class:"ms-1",variant:"danger",onClick:M.confirm},{default:(0,a.w5)((()=>[(0,a.Uk)("Delete")])),_:1},8,["onClick"]),(0,a._)("div",_,[(0,a.Wm)(S,{variant:"light",onClick:M.closeModal},{default:(0,a.w5)((()=>[(0,a.Uk)("Close")])),_:1},8,["onClick"]),(0,a.Wm)(V,{class:"ms-1",variant:"success",onClick:M.editSubmit},{default:(0,a.w5)((()=>[(0,a.Uk)("Save")])),_:1},8,["onClick"])])])],32)])),_:1},8,["modelValue"])])),_:1})}var k=l(4813),M=l(6993),E=l(1029),D=l(9897),W=l(325),$=l(7292),B=l(5705),U=l(760),S=l(6455),Z=l.n(S),x=l(6278),V=l(1022),T=l(6286),q=l(2298),I={components:{FullCalendar:k.Z,Layout:x.Z,PageHeader:V.Z},setup(){return{v$:(0,B.Xw)()}},data(){return{title:"Calendar",items:[{text:"Minible"},{text:"Calendar",active:!0}],calendarEvents:[],calendarOptions:{eventDrop:this.handleEventDrop,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},plugins:[M.Z,E.Z,D.ZP,W.Z,$.Z],initialView:"dayGridMonth",themeSystem:"bootstrap",initialEvents:[],editable:!0,droppable:!0,eventResizableFromStart:!0,dateClick:this.dateClicked,eventClick:this.editEvent,eventsSet:this.handleEvents,weekends:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0},currentEvents:[],tableData:[],showModal:!1,eventModal:!1,categories:T.b,submitted:!1,submit:!1,newEventData:{},edit:{},deleteId:{},event:{title:"",category:""},editevent:{editTitle:"",editcategory:""}}},validations:{event:{title:{required:U.C1},category:{required:U.C1}}},mounted(){this.getData()},methods:{async getData(){try{const e=await this.$http.get(this.$apiURL+"birthday/all");this.calendarOptions.events=e.data.data,this.event.category="Danger",console.log(this.calendarOptions.events)}catch(e){console.error(e)}},handleSubmit(){if(this.submitted=!0,this.v$.$touch(),this.v$.$invalid)return;const e=(0,q.Z)(new Date(this.newEventData.date),"yyyy-MM-dd"),t={title:this.event.title,start:e,end:e,user_id:1};this.$http.post(this.$apiURL+"birthday/store",t).then((e=>{console.log(e),this.successmsg(),this.showModal=!1,this.getData()})).catch((e=>{console.error(e)})),this.submitted=!1,this.event={}},handleEventDrop(e){console.log(e);const t=(0,q.Z)(new Date(e.event.start),"yyyy-MM-dd"),l=e.event.end?(0,q.Z)(new Date(e.event.end),"yyyy-MM-dd"):t,a={title:e.event.title,start:t,end:l,id:parseInt(e.event.id)};this.updateEvent(e.event.id,a)},updateEvent(e,t){console.log(e,t),this.$http.post(this.$apiURL+"birthday/store",t).then((e=>{console.log(e),this.successmsg(),this.showModal=!1,this.getData()})).catch((e=>{console.error(e)}))},hideModal(){this.submitted=!1,this.showModal=!1,this.event={}},editSubmit(){console.log(this.editevent);const e={title:this.editevent.editTitle,id:parseInt(this.edit.id)};this.updateEvent(this.edit.id,e),this.closeModal()},deleteEvent(){this.edit.remove(),this.eventModal=!1},dateClicked(e){this.newEventData=e,this.showModal=!0},editEvent(e){this.edit=e.event,this.editevent.editTitle=this.edit.title,this.editevent.editcategory=this.edit.classNames[0],this.eventModal=!0},closeModal(){this.eventModal=!1},confirm(){Z().fire({title:"Are you sure?",text:"You won't be able to delete this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then((e=>{e.value&&(this.deleteEvent(),Z().fire("Deleted!","Event has been deleted.","success"))}))},handleEvents(e){this.currentEvents=e},successmsg(){Z().fire({position:"center",icon:"success",title:"Event has been saved",showConfirmButton:!1,timer:1e3})}}},L=l(3744);const R=(0,L.Z)(I,[["render",C]]);var F=R}}]);
//# sourceMappingURL=60.6e340b23.js.map