"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[419],{4132:function(e,t,a){a.r(t),a.d(t,{default:function(){return H}});var s=a(6252);const l={id:"tickets-table_length",class:"dataTables_length"},i={class:"d-inline-flex align-items-center"},r={class:"col-sm-12 col-md-6"},n={id:"tickets-table_filter",class:"dataTables_filter text-md-end"},o={class:"d-inline-flex align-items-center"},d={class:"table-responsive mb-0"},c={class:"dataTables_paginate paging_simple_numbers float-end"},u={class:"pagination pagination-rounded mb-0"},m={id:"tickets-table_length",class:"dataTables_length"},h={class:"d-inline-flex align-items-center"},p={class:"col-sm-12 col-md-6"},g={id:"tickets-table_filter",class:"dataTables_filter text-md-end"},f={class:"d-inline-flex align-items-center"},b={class:"table-responsive mb-0"},_={class:"dataTables_paginate paging_simple_numbers float-end"},O={class:"pagination pagination-rounded mb-0"},w={class:"row"},G={id:"tickets-table_length",class:"dataTables_length"},T={class:"d-inline-flex align-items-center"},W={class:"col-sm-12 col-md-6"},y={id:"tickets-table_filter",class:"dataTables_filter text-md-end"},v={class:"d-inline-flex align-items-center"},I={class:"table-responsive mb-0"},k={class:"dataTables_paginate paging_simple_numbers float-end"},V={class:"pagination pagination-rounded mb-0"},U={id:"tickets-table_length",class:"dataTables_length"},D={class:"d-inline-flex align-items-center"},P={class:"col-sm-12 col-md-6"},R={id:"tickets-table_filter",class:"dataTables_filter text-md-end"},x={class:"d-inline-flex align-items-center"},C={class:"table-responsive mb-0"},M={class:"dataTables_paginate paging_simple_numbers float-end"},$={class:"pagination pagination-rounded mb-0"};function F(e,t,a,F,A,S){const B=(0,s.up)("PageHeader"),L=(0,s.up)("BCardTitle"),z=(0,s.up)("BCol"),Z=(0,s.up)("Multiselect"),H=(0,s.up)("BRow"),J=(0,s.up)("BFormSelect"),N=(0,s.up)("BFormInput"),j=(0,s.up)("BTable"),q=(0,s.up)("BPagination"),E=(0,s.up)("BCardBody"),K=(0,s.up)("BCard"),Q=(0,s.up)("Layout");return(0,s.wg)(),(0,s.j4)(Q,null,{default:(0,s.w5)((()=>[(0,s.Wm)(B,{title:A.title,items:A.items},null,8,["title","items"]),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Wm)(z,{lg:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(K,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Avance instalaciones")])),_:1}),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Wm)(z,{cols:"7"}),(0,s.Wm)(z,{cols:"5"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Filtrar por: "),(0,s.Wm)(Z,{modelValue:A.ciudadId,"onUpdate:modelValue":t[0]||(t[0]=e=>A.ciudadId=e),options:A.Ciudades,onChange:t[1]||(t[1]=e=>S.getTableInstalaciones()),placeholder:"Seleccionar Ciudad"},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,s.Wm)(H,{class:"mt-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(z,{sm:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",l,[(0,s._)("label",i,[(0,s.Uk)(" Show  "),(0,s.Wm)(J,{modelValue:A.perPage,"onUpdate:modelValue":t[2]||(t[2]=e=>A.perPage=e),size:"sm",options:A.pageOptions},null,8,["modelValue","options"]),(0,s.Uk)(" entries ")])])])),_:1}),(0,s._)("div",r,[(0,s._)("div",n,[(0,s._)("label",o,[(0,s.Uk)(" Search: "),(0,s.Wm)(N,{modelValue:A.filter,"onUpdate:modelValue":t[3]||(t[3]=e=>A.filter=e),type:"search",placeholder:"Search...",class:"form-control form-control-sm ms-2"},null,8,["modelValue"])])])])])),_:1}),(0,s._)("div",d,[(0,s.Wm)(j,{items:A.TableInstalaciones,fields:A.fields,responsive:"sm","per-page":A.perPage,"current-page":A.currentPage,"sort-by":A.sortBy,"sort-desc":A.sortDesc,filter:A.filter,"filter-included-fields":A.filterOn,onFiltered:S.onFiltered},null,8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])]),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Wm)(z,null,{default:(0,s.w5)((()=>[(0,s._)("div",c,[(0,s._)("ul",u,[(0,s.Wm)(q,{modelValue:A.currentPage,"onUpdate:modelValue":t[4]||(t[4]=e=>A.currentPage=e),"total-rows":A.totalRows,"per-page":A.perPage},null,8,["modelValue","total-rows","per-page"])])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(z,{lg:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(K,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Ordenes por gestor instalaciones")])),_:1}),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Wm)(z,{cols:"7"}),(0,s.Wm)(z,{cols:"5"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Filtrar por: "),(0,s.Wm)(Z,{modelValue:A.GestorAgendaId,"onUpdate:modelValue":t[5]||(t[5]=e=>A.GestorAgendaId=e),options:A.GestorAgenda,onChange:t[6]||(t[6]=e=>S.getTableGestor()),placeholder:"Seleccionar Gestor"},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,s.Wm)(H,{class:"mt-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(z,{sm:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s._)("label",h,[(0,s.Uk)(" Show  "),(0,s.Wm)(J,{modelValue:A.perPageGestor,"onUpdate:modelValue":t[7]||(t[7]=e=>A.perPageGestor=e),size:"sm",options:A.pageOptionsGestor},null,8,["modelValue","options"]),(0,s.Uk)(" entries ")])])])),_:1}),(0,s._)("div",p,[(0,s._)("div",g,[(0,s._)("label",f,[(0,s.Uk)(" Search: "),(0,s.Wm)(N,{modelValue:A.filterGestor,"onUpdate:modelValue":t[8]||(t[8]=e=>A.filterGestor=e),type:"search",placeholder:"Search...",class:"form-control form-control-sm ms-2"},null,8,["modelValue"])])])])])),_:1}),(0,s._)("div",b,[(0,s.Wm)(j,{items:A.tableDataGestor,fields:A.fieldsGestor,responsive:"sm","per-page":A.perPageGestor,"current-page":A.currentPageGestor,"sort-by":A.sortByGestor,"sort-desc":A.sortDescGestor,filter:A.filterGestor,"filter-included-fields":A.filterOnGestor,onFiltered:S.onFilteredGestor},null,8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])]),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Wm)(z,null,{default:(0,s.w5)((()=>[(0,s._)("div",_,[(0,s._)("ul",O,[(0,s.Wm)(q,{modelValue:A.currentPageGestor,"onUpdate:modelValue":t[9]||(t[9]=e=>A.currentPageGestor=e),"total-rows":A.totalRowsGestor,"per-page":A.perPageGestor},null,8,["modelValue","total-rows","per-page"])])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s._)("div",w,[(0,s.Wm)(z,{lg:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(K,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Avance Mantenimientos")])),_:1}),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Wm)(z,{cols:"7"}),(0,s.Wm)(z,{cols:"5"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Filtrar por: "),(0,s.Wm)(Z,{modelValue:A.ciudadId2,"onUpdate:modelValue":t[10]||(t[10]=e=>A.ciudadId2=e),options:A.Ciudades,onChange:t[11]||(t[11]=e=>S.getTableMantenimientos()),placeholder:"Seleccionar Ciudad"},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,s.Wm)(H,{class:"mt-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(z,{sm:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",G,[(0,s._)("label",T,[(0,s.Uk)(" Show  "),(0,s.Wm)(J,{modelValue:A.perPage2,"onUpdate:modelValue":t[12]||(t[12]=e=>A.perPage2=e),size:"sm",options:A.pageOptions2},null,8,["modelValue","options"]),(0,s.Uk)(" entries ")])])])),_:1}),(0,s._)("div",W,[(0,s._)("div",y,[(0,s._)("label",v,[(0,s.Uk)(" Search: "),(0,s.Wm)(N,{modelValue:A.filter2,"onUpdate:modelValue":t[13]||(t[13]=e=>A.filter2=e),type:"search",placeholder:"Search...",class:"form-control form-control-sm ms-2"},null,8,["modelValue"])])])])])),_:1}),(0,s._)("div",I,[(0,s.Wm)(j,{items:A.tableMantenimiento,fields:A.fieldsMantenimiento,responsive:"sm","per-page":A.perPage2,"current-page":A.currentPage2,"sort-by":A.sortBy2,"sort-desc":A.sortDesc2,filter:A.filter2,"filter-included-fields":A.filterOn2,onFiltered:S.onFiltered},null,8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])]),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Wm)(z,null,{default:(0,s.w5)((()=>[(0,s._)("div",k,[(0,s._)("ul",V,[(0,s.Wm)(q,{modelValue:A.currentPage2,"onUpdate:modelValue":t[14]||(t[14]=e=>A.currentPage2=e),"total-rows":A.totalRows2,"per-page":A.perPage2},null,8,["modelValue","total-rows","per-page"])])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(z,{lg:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(K,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Ordenes por gestor - horas pendientes")])),_:1}),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Wm)(z,{cols:"8"}),(0,s.Wm)(z,{cols:"4"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Filtrar por: "),(0,s.Wm)(Z,{modelValue:A.OrdenesGestorId,"onUpdate:modelValue":t[15]||(t[15]=e=>A.OrdenesGestorId=e),options:A.OrdenesGestor,placeholder:"Seleccionar Gestor",onChange:t[16]||(t[16]=e=>S.getTableOrder())},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,s.Wm)(H,{class:"mt-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(z,{sm:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",U,[(0,s._)("label",D,[(0,s.Uk)(" Show  "),(0,s.Wm)(J,{modelValue:A.perPageOrder,"onUpdate:modelValue":t[17]||(t[17]=e=>A.perPageOrder=e),size:"sm",options:A.pageOptionsOrder},null,8,["modelValue","options"]),(0,s.Uk)(" entries ")])])])),_:1}),(0,s._)("div",P,[(0,s._)("div",R,[(0,s._)("label",x,[(0,s.Uk)(" Search: "),(0,s.Wm)(N,{modelValue:A.filterOrder,"onUpdate:modelValue":t[18]||(t[18]=e=>A.filterOrder=e),type:"search",placeholder:"Search...",class:"form-control form-control-sm ms-2"},null,8,["modelValue"])])])])])),_:1}),(0,s._)("div",C,[(0,s.Wm)(j,{items:A.tableDataOrder,fields:A.fieldsOrder,responsive:"sm","per-page":A.perPageOrder,"current-page":A.currentPageOrder,"sort-by":A.sortByOrder,"sort-desc":A.sortDescOrder,filter:A.filterOrder,"filter-included-fields":A.filterOnOrder,onFiltered:S.onFilteredOrder},null,8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])]),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Wm)(z,null,{default:(0,s.w5)((()=>[(0,s._)("div",M,[(0,s._)("ul",$,[(0,s.Wm)(q,{modelValue:A.currentPageOrder,"onUpdate:modelValue":t[19]||(t[19]=e=>A.currentPageOrder=e),"total-rows":A.totalRowsOrder,"per-page":A.perPageOrder},null,8,["modelValue","total-rows","per-page"])])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])])),_:1})}a(560);var A=a(4642),S=a(1022),B=a(7091),L={components:{Layout:A.Z,Multiselect:B.Z,PageHeader:S.Z},data(){return{title:"Gestión",TableInstalaciones:[],tableMantenimiento:[],tableDataGestor:[],tableDataOrder:[],GestorAgenda:[],Ciudades:[],ciudadId:null,ciudadId2:null,OrdenesGestor:[],GestorOrdenes:[],GestorAgendaId:null,OrdenesGestorId:null,GestorOrdenId:null,items:[{text:"Charts",href:"/"},{text:"Apex",active:!0}],items2:[{text:"Charts",href:"/"},{text:"Apex",active:!0}],itemsGestor:[{text:"Charts",href:"/"},{text:"Apex",active:!0}],itemsOrder:[{text:"Charts",href:"/"},{text:"Apex",active:!0}],totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:null,filterOn:[],sortBy:"age",sortDesc:!1,fields:[],totalRows2:1,currentPage2:1,perPage2:10,pageOptions2:[10,25,50,100],filter2:null,filterOn2:[],sortBy2:"age",sortDesc2:!1,fieldsMantenimiento:[],totalRowsGestor:1,currentPageGestor:1,perPageGestor:10,pageOptionsGestor:[10,25,50,100],filterOnGestor:[],filterGestor:null,sortByGestor:"age",sortDescGestor:!1,fieldsGestor:[],totalesGestor:0,totalRowsOrder:1,currentPageOrder:1,perPageOrder:10,pageOptionsOrder:[10,25,50,100],filterOnOrder:[],filterOrder:null,sortByOrder:"age",sortDescOrder:!1,fieldsOrder:[],totalesOrder:0,previousTableMantenimientosData:{},previousTableInstalacionesData:{},previousTableGestorData:{},previousTableOrderData:{}}},mounted(){this.totalRows=this.items.length,this.totalRows2=this.items2.length,this.totalRowsGestor=this.itemsGestor.length,this.totalRowsOrder=this.itemsOrder.length,this.getTableMantenimientos(),this.getTableInstalaciones(),this.getTableOrder(),this.getGestorAgenda(),this.getOrdenesGestor(),this.getCity()},methods:{onFiltered(e){this.totalRows=e.length,this.currentPage=1},onFiltered2(e){this.totalRows2=e.length,this.currentPage2=1},onFilteredGestor(e){this.totalRowsGestor=e.length,this.currentPageGestor=1},onFilteredOrder(e){this.totalRowsOrder=e.length,this.currentPageOrder=1},async updateDataIfChanged(){console.log("cambio"),await Promise.all([this.updateTableMantenimientos(),this.updateTableInstalaciones(),this.updateTableGestor(),this.updateTableOrder()])},async updateTableMantenimientos(){null!=this.ciudadId2&&this.$nextTick((async()=>{const e=await this.$http.get(this.$apiURL+"management/maintenanceprogresstable/"+this.ciudadId2),t={series:e.data.series,fields:e.data.fields};this.dataChanged(this.previousTableMantenimientosData,t)&&(this.tableMantenimiento.splice(0,this.tableMantenimiento.length),this.fieldsMantenimiento.splice(0,this.fieldsMantenimiento.length),t.series.map((e=>this.tableMantenimiento.push({...e}))),t.fields.map((e=>this.fieldsMantenimiento.push({key:e,sortable:!0}))),this.totalRows2=this.tableMantenimiento.length,this.previousTableMantenimientosData=t)}))},async updateTableInstalaciones(){null!=this.ciudadId&&this.$nextTick((async()=>{const e=await this.$http.get(this.$apiURL+"management/installationprogresstable/"+this.ciudadId),t={series:e.data.series,fields:e.data.fields};this.dataChanged(this.previousTableInstalacionesData,t)&&(this.TableInstalaciones.splice(0,this.TableInstalaciones.length),this.fields.splice(0,this.fields.length),t.series.map((e=>this.TableInstalaciones.push({...e}))),t.fields.map((e=>this.fields.push({key:e,sortable:!0}))),this.totalRows=this.TableInstalaciones.length,this.previousTableInstalacionesData=t)}))},async updateTableGestor(){null!=this.GestorAgendaId&&this.$nextTick((async()=>{const e=await this.$http.get(this.$apiURL+"management/installationlogmanagertable/"+this.GestorAgendaId),t={series:e.data.series,fields:e.data.fields};this.dataChanged(this.previousTableGestorData,t)&&(this.tableDataGestor.splice(0,this.tableDataGestor.length),this.fieldsGestor.splice(0,this.fieldsGestor.length),t.series.map((e=>this.tableDataGestor.push({...e}))),t.fields.map((e=>this.fieldsGestor.push({key:e,sortable:!0}))),this.totalRowsGestor=this.tableDataGestor.length,this.totalesGestor=e.data.totales,this.previousTableGestorData=t)}))},async updateTableOrder(){null!=this.OrdenesGestorId&&this.$nextTick((async()=>{const e=await this.$http.get(this.$apiURL+"management/ordermanagertable/"+this.OrdenesGestorId),t={series:e.data.series,categories:e.data.categories};this.dataChanged(this.previousTableOrderData,t)&&(console.log(this.previousTableOrderData),console.log(t),this.tableDataOrder.splice(0,this.tableDataOrder.length),this.fieldsOrder.splice(0,this.fieldsOrder.length),t.series.map((e=>this.tableDataOrder.push({...e}))),t.categories.map((e=>this.fieldsOrder.push({key:e,sortable:!0}))),this.totalRowsOrder=this.tableDataOrder.length,this.totalesOrder=e.data.totales,this.previousTableOrderData=t)}))},dataChanged(e,t){return void 0!=t&&JSON.stringify(e)!==JSON.stringify(t)},async getGestorAgenda(){const e=await this.$http.get(this.$apiURL+"manager/managersaltas");e.data.data.map((e=>this.GestorAgenda.push(e.manager))),this.GestorAgendaId=this.GestorAgenda[0]},async getCity(){const e=await this.$http.get(this.$apiURL+"city/all");e.data.data.map((e=>this.Ciudades.push(e.name))),this.ciudadId=this.Ciudades[0],this.ciudadId2=this.Ciudades[0]},async getOrdenesGestor(){const e=await this.$http.get(this.$apiURL+"manager/managersaverias");e.data.data.map((e=>this.OrdenesGestor.push(e.manager))),this.OrdenesGestorId=this.OrdenesGestor[0]},async getTableMantenimientos(){try{null!=this.ciudadId2&&this.$nextTick((async()=>{this.tableMantenimiento.splice(0,this.tableMantenimiento.length),this.fieldsMantenimiento.splice(0,this.fieldsMantenimiento.length);const e=await this.$http.get(this.$apiURL+"management/maintenanceprogresstable/"+this.ciudadId2);this.previousTableMantenimientosData={series:e.data.series,fields:e.data.fields},e.data.series.map((e=>this.tableMantenimiento.push({...e}))),e.data.fields.map((e=>this.fieldsMantenimiento.push({key:e,sortable:!0}))),this.totalRows2=this.tableMantenimiento.length}))}catch(e){console.error(e)}},async getTableInstalaciones(){try{null!=this.ciudadId&&this.$nextTick((async()=>{this.TableInstalaciones.splice(0,this.TableInstalaciones.length),this.fields.splice(0,this.fields.length);const e=await this.$http.get(this.$apiURL+"management/installationprogresstable/"+this.ciudadId);this.previousTableInstalacionesData={series:e.data.series,fields:e.data.fields},e.data.series.map((e=>this.TableInstalaciones.push({...e}))),e.data.fields.map((e=>this.fields.push({key:e,sortable:!0}))),this.totalRows=this.TableInstalaciones.length}))}catch(e){console.error(e)}},async getTableGestor(){try{null!=this.GestorAgendaId&&this.$nextTick((async()=>{this.tableDataGestor.splice(0,this.tableDataGestor.length),this.fieldsGestor.splice(0,this.fieldsGestor.length);const e=await this.$http.get(this.$apiURL+"management/installationlogmanagertable/"+this.GestorAgendaId);this.previousTableGestorData={series:e.data.series,fields:e.data.fields},e.data.series.map((e=>this.tableDataGestor.push({...e}))),e.data.categories.map((e=>this.fieldsGestor.push({key:e,sortable:!0}))),this.totalRowsGestor=this.tableDataGestor.length,this.totalesGestor=e.data.totales}))}catch(e){console.error(e)}},async getTableOrder(){try{null!=this.OrdenesGestorId&&this.$nextTick((async()=>{this.tableDataOrder.splice(0,this.tableDataOrder.length),this.fieldsOrder.splice(0,this.fieldsOrder.length);const e=await this.$http.get(this.$apiURL+"management/ordermanagertable/"+this.OrdenesGestorId);this.previousTableOrderData={series:e.data.series,categories:e.data.categories},e.data.series.map((e=>this.tableDataOrder.push({...e}))),e.data.categories.map((e=>this.fieldsOrder.push({key:e,sortable:!0}))),this.totalRowsOrder=this.tableDataOrder.length,this.totalesOrder=e.data.totales}))}catch(e){console.error(e)}}},middleware:"authentication"},z=a(3744);const Z=(0,z.Z)(L,[["render",F]]);var H=Z}}]);
//# sourceMappingURL=419.e32d6d8b.js.map