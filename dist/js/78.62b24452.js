"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[78],{1022:function(e,t,l){l.d(t,{Z:function(){return p}});var s=l(6252),a=l(3577);const r={class:"page-title-box d-flex align-items-center justify-content-between"},o={class:"mb-0"},i={class:"page-title-right"};function n(e,t,l,n,d,u){const m=(0,s.up)("b-breadcrumb"),p=(0,s.up)("BCol"),c=(0,s.up)("BRow");return(0,s.wg)(),(0,s.j4)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("h4",o,(0,a.zw)(l.title),1),(0,s._)("div",i,[(0,s.Wm)(m,{items:l.items,class:"m-0"},null,8,["items"])])])])),_:1})])),_:1})}var d={props:{title:{type:String,default:""},items:{type:Array,default:()=>[]}}},u=l(3744);const m=(0,u.Z)(d,[["render",n]]);var p=m},3355:function(e,t,l){l.r(t),l.d(t,{default:function(){return T}});var s=l(6252);const a={id:"tickets-table_length",class:"dataTables_length"},r={class:"d-inline-flex align-items-center"},o={class:"col-sm-12 col-md-6"},i={id:"tickets-table_filter",class:"dataTables_filter text-md-end"},n={class:"d-inline-flex align-items-center"},d={class:"table-responsive mb-0"},u={class:"dataTables_paginate paging_simple_numbers float-end"},m={class:"pagination pagination-rounded mb-0"};function p(e,t,l,p,c,h){const f=(0,s.up)("PageHeader"),w=(0,s.up)("BCardTitle"),g=(0,s.up)("BFormSelect"),_=(0,s.up)("BCol"),b=(0,s.up)("BFormInput"),U=(0,s.up)("BRow"),W=(0,s.up)("BButton"),v=(0,s.up)("BTable"),y=(0,s.up)("BPagination"),V=(0,s.up)("BCardBody"),C=(0,s.up)("BCard"),P=(0,s.up)("UserModal"),B=(0,s.up)("Layout");return(0,s.wg)(),(0,s.j4)(B,null,{default:(0,s.w5)((()=>[(0,s.Wm)(f,{title:e.title,items:e.items},null,8,["title","items"]),(0,s.Wm)(U,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,{cols:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(V,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Listado de Usuarios")])),_:1}),(0,s.Wm)(U,{class:"mt-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{sm:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",a,[(0,s._)("label",r,[(0,s.Uk)(" Show  "),(0,s.Wm)(g,{modelValue:c.perPageUser,"onUpdate:modelValue":t[0]||(t[0]=e=>c.perPageUser=e),size:"sm",options:c.pageOptionsUser},null,8,["modelValue","options"]),(0,s.Uk)(" entries ")])])])),_:1}),(0,s._)("div",o,[(0,s._)("div",i,[(0,s._)("label",n,[(0,s.Uk)(" Search: "),(0,s.Wm)(b,{modelValue:c.filterUser,"onUpdate:modelValue":t[1]||(t[1]=e=>c.filterUser=e),type:"search",placeholder:"Search...",class:"form-control form-control-sm ms-2"},null,8,["modelValue"])])])])])),_:1}),(0,s._)("div",d,[(0,s.Wm)(v,{items:c.tableDataUser,fields:c.fieldsUser,responsive:"sm","per-page":c.perPageUser,"current-page":c.currentPageUser,"sort-by":c.sortByUser,"sort-desc":c.sortDescUser,filter:c.filterUser,"filter-included-fields":c.filterOnUser,onFiltered:h.onFilteredUser},{"cell(actions)":(0,s.w5)((({item:e})=>[(0,s.Wm)(W,{onClick:t=>h.editItem(e),variant:"info"},{default:(0,s.w5)((()=>[(0,s.Uk)("Editar")])),_:2},1032,["onClick"])])),_:1},8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])]),(0,s.Wm)(U,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[(0,s._)("div",u,[(0,s._)("ul",m,[(0,s.Wm)(y,{modelValue:c.currentPageUser,"onUpdate:modelValue":t[2]||(t[2]=e=>c.currentPageUser=e),"total-rows":c.totalRowsUser,"per-page":c.perPageUser},null,8,["modelValue","total-rows","per-page"])])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(P,{ref:"UserModal"},null,512)])),_:1})}l(560);var c=l(4642),h=l(1022),f=l(9963),w=l(3577);const g=(0,s._)("i",{class:"bx bx-check-circle"},null,-1),_={class:"mt-4"},b={class:"mt-4"},U={class:"mt-4"},W={class:"mt-4"},v={class:"mt-4"},y={class:"mt-4"},V={class:"mt-4"},C={class:"input-group"},P={class:"mt-4"},B={class:"mt-3 text-end"};function k(e,t,l,a,r,o){const i=(0,s.up)("BCol"),n=(0,s.up)("BRow"),d=(0,s.up)("BCardHeader"),u=(0,s.up)("BFormInput"),m=(0,s.up)("BFormGroup"),p=(0,s.up)("BButton"),c=(0,s.up)("BInputGroupAppend"),h=(0,s.up)("Multiselect"),k=(0,s.up)("BCardBody"),$=(0,s.up)("BCard"),I=(0,s.up)("BModal");return(0,s.wg)(),(0,s.j4)(I,{modelValue:r.isOpen,"onUpdate:modelValue":t[13]||(t[13]=e=>r.isOpen=e),size:"xl","hide-footer":""},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{cols:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)($,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{sm:"7"},{default:(0,s.w5)((()=>[g,(0,s.Uk)("   Editar usuario ")])),_:1})])),_:1})])),_:1}),(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[(0,s._)("form",{autocomplete:"off",class:"row no-gutters",onSubmit:t[12]||(t[12]=(0,f.iM)(((...t)=>e.submit&&e.submit(...t)),["prevent"]))},[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",_,[(0,s.Wm)(m,{id:"email-group",label:"Nombre Completo",class:"mb-3","label-for":"name"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{id:"name",modelValue:r.user.Nombres,"onUpdate:modelValue":t[0]||(t[0]=e=>r.user.Nombres=e),type:"text",required:"",placeholder:"Ingresar Nombres",onInput:t[1]||(t[1]=e=>o.generateUsername())},null,8,["modelValue"])])),_:1})])])),_:1}),(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",b,[(0,s.Wm)(m,{id:"email-group",label:"Apellido Paterno",class:"mb-3","label-for":"paterno"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{id:"paterno",modelValue:r.user.Apellido_Paterno,"onUpdate:modelValue":t[2]||(t[2]=e=>r.user.Apellido_Paterno=e),type:"text",required:"",placeholder:"Ingresar Apellido Paterno",onInput:t[3]||(t[3]=e=>o.generateUsername())},null,8,["modelValue"])])),_:1})])])),_:1}),(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",U,[(0,s.Wm)(m,{id:"email-group",label:"Apellido Materno",class:"mb-3","label-for":"materno"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{id:"materno",modelValue:r.user.Apellido_Materno,"onUpdate:modelValue":t[4]||(t[4]=e=>r.user.Apellido_Materno=e),type:"text",required:"",placeholder:"Ingresar Apellido Materno"},null,8,["modelValue"])])),_:1})])])),_:1}),(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",W,[(0,s.Wm)(m,{id:"email-group",label:"DNI",class:"mb-3","label-for":"dni"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{id:"dni",modelValue:r.user.Dni,"onUpdate:modelValue":t[5]||(t[5]=e=>r.user.Dni=e),type:"text",placeholder:"Ingresar DNI",required:"",onInput:t[6]||(t[6]=e=>o.generateUsername())},null,8,["modelValue"])])),_:1})])])),_:1}),(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",v,[(0,s.Wm)(m,{label:"Correo","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{id:"email",modelValue:r.user.email,"onUpdate:modelValue":t[7]||(t[7]=e=>r.user.email=e),type:"email",placeholder:"Ingresar Correo",required:""},null,8,["modelValue"])])),_:1})])])),_:1}),(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",y,[(0,s.Wm)(m,{id:"email-group",label:"Usuario",class:"mb-3","label-for":"username"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{id:"username",modelValue:r.user.username,"onUpdate:modelValue":t[8]||(t[8]=e=>r.user.username=e),type:"text",placeholder:"Ingresar usuario",required:""},null,8,["modelValue"])])),_:1})])])),_:1}),(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",V,[(0,s.Wm)(m,{id:"password-group",label:"Contraseña",class:"mb-3","label-for":"password"},{default:(0,s.w5)((()=>[(0,s._)("div",C,[(0,s.Wm)(u,{id:"password",modelValue:r.user.password,"onUpdate:modelValue":t[9]||(t[9]=e=>r.user.password=e),type:r.showPassword?"text":"password",placeholder:"Ingresar contraseña",class:(0,w.C_)({"is-invalid":r.submitted&&a.v$.user.password.$error})},null,8,["modelValue","type","class"]),(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,{variant:"outline-secondary",onClick:t[10]||(t[10]=e=>r.showPassword=!r.showPassword)},{default:(0,s.w5)((()=>[(0,s._)("i",{class:(0,w.C_)("bx "+(r.showPassword?"bx-show":"bx-hide"))},null,2)])),_:1})])),_:1})]),(0,s.Wm)(p,{variant:"secondary",onClick:o.generatePassword},{default:(0,s.w5)((()=>[(0,s.Uk)("Generar Contraseña")])),_:1},8,["onClick"])])),_:1})])])),_:1}),(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",P,[(0,s.Wm)(m,{label:"Rol","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{modelValue:r.user.role_id,"onUpdate:modelValue":t[11]||(t[11]=e=>r.user.role_id=e),required:"",options:r.roles.map((e=>({value:e.id,label:e.description}))),class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])])),_:1})])),_:1}),(0,s._)("div",B,[(0,s.Wm)(p,{variant:"primary",class:"w-sm",onClick:o.tryToRegisterIn},{default:(0,s.w5)((()=>[(0,s.Uk)("Actualizar ")])),_:1},8,["onClick"])])],32)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}var $=l(5705),I=l(760),M=l(7091),x={components:{Multiselect:M.Z},setup(){return{v$:(0,$.Xw)()}},data(){return{isOpen:!1,user:{},passwordGenerated:!1,showPassword:!1,roles:[],rol:null,submitted:!1,tryingToRegister:!1,isRegisterError:!1,title:"NUEVO USUARIO"}},validations(){return{user:{username:{required:I.C1},password:{required:I.C1,strongPassword:this.strongPassword}}}},computed:{notification(){return this.$store?this.$store.state.notification:null},notificationAutoCloseDuration(){return this.$store&&this.$store.state.notification?5:0}},mounted(){this.initForm(),this.getRol()},methods:{generateUsername(){if(this.user.Nombres&&this.user.Apellido_Paterno&&this.user.Dni){const e=this.user.Nombres.charAt(0),t=this.user.Apellido_Paterno,l=this.user.Dni.slice(0,2);this.user.username=`${e}${t}${l}`.toLowerCase()}},generatePassword(){const e="abcdefghijklmnopqrstuvwxyz",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",l="0123456789",s="!@#$%^&*";let a="";a+=e[Math.floor(Math.random()*e.length)],a+=t[Math.floor(Math.random()*t.length)],a+=l[Math.floor(Math.random()*l.length)],a+=s[Math.floor(Math.random()*s.length)];const r=e+t+l+s;for(let o=a.length;o<10;o++)a+=r[Math.floor(Math.random()*r.length)];a=a.split("").sort((()=>.5-Math.random())).join(""),this.user.password=a,this.passwordGenerated=!0},strongPassword(e){const t=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;return t.test(e)},initForm(){this.user={username:"user.name",Nombres:null,Apellido_Paterno:null,Apellido_Materno:null,Dni:null,password:"",role_id:"",email:null,Nacimiento:null}},async getRol(){try{const e=await this.$http.get(this.$apiURL+"role/all"),t=e.data.data;t.forEach((e=>{this.roles.push(e)})),console.log(this.roles)}catch(e){console.error("Error fetching roles:",e)}},open(e){console.log(e),this.isOpen=!0;const{rol:t,...l}=e;this.rol=t,this.user={...l}},saveChanges(){this.$emit("edit-complete",this.selectedItem),this.close()},close(){this.isOpen=!1,this.selectedItem=null},tryToRegisterIn(){this.submitted=!0,this.v$.$touch(),this.user.password,this.user.password&&(console.log("no"),this.v$.$invalid)||this.$http.put(this.$apiURL+"user/update/"+this.user.id,this.user,{}).then((e=>{200==e.status&&(this.$swal({title:"Completado!",text:e.data.message,icon:"success",confirmButtonColor:"#6457A2"}),setTimeout((()=>{window.location.reload()}),2e3))})).catch((e=>{console.error(e),this.$swal({icon:"error",title:"Oops...",text:e})}))}}},A=l(3744);const R=(0,A.Z)(x,[["render",k]]);var D=R,O={components:{Layout:c.Z,PageHeader:h.Z,UserModal:D},data(){return{itemsUser:[{text:"Charts",href:"/"},{text:"Apex",active:!0}],tableDataUser:[],totalRowsUser:1,currentPageUser:1,perPageUser:25,pageOptionsUser:[10,25,50,100],filterOnUser:[],filterUser:null,sortByUser:"age",sortDescUser:!1,fieldsUser:[{key:"id",sortable:!0},{key:"username",sortable:!0},{key:"rol",sortable:!0},{key:"actions",sortable:!0}]}},mounted(){this.totalRowsUser=this.itemsUser.length,this.getTableUser()},methods:{onFilteredUser(e){this.totalRowsUser=e.length,this.currentPageUser=1},async getTableUser(){console.log("hola");try{const e=await this.$http.get(this.$apiURL+"user/all");console.log(e),e.data.data.map((e=>this.tableDataUser.push({...e}))),this.totalRowsUser=this.tableDataUser.length}catch(e){console.error(e)}},editItem(e){console.log("Editar item",e),this.selectedItem=JSON.parse(JSON.stringify(e)),this.$refs.UserModal.open(this.selectedItem)}},middleware:"authentication"};const N=(0,A.Z)(O,[["render",p]]);var T=N}}]);
//# sourceMappingURL=78.62b24452.js.map