"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[165],{9900:function(e,t,a){function i(e,t){let a={series:e,chartOptions:{chart:{toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"45%",endingShape:"rounded",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",colors:["#000"]}},stroke:{show:!0,width:2,colors:["transparent"]},colors:["#10b07a","#dc3545","#f1b44c"],xaxis:{categories:t},yaxis:{title:{text:""}},grid:{borderColor:"#f1f1f1"},fill:{opacity:1}}};return a}function s(e,t,a=null){console.log(e,t);let i=null==a?["#3477C3","#8F34C3","#C3349A","#C33459","#C37534","3479C3"]:["#FF7F50","#91cc75","#ee6666","#fac858","#4DB6AC","34C3B8"],s={series:e,chartOptions:{labels:t,colors:i,legend:{show:!0,position:"bottom",horizontalAlign:"center",verticalAlign:"middle",floating:!1,fontSize:"14px",offsetX:0,offsetY:10},responsive:[{breakpoint:600,options:{chart:{height:240},legend:{show:!1}}}],dataLabels:{style:{fontSize:"14px"}},plotOptions:{pie:{dataLabels:{offset:-20}}}}};return s}function l(e,t){let a={series:[{data:e}],chartOptions:{chart:{toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,dataLabels:{position:"bottom"},distributed:!1}},dataLabels:{enabled:!1},colors:["#34c38f","#556ee6","#f46a6a","#50a5f1","#A5978B","#2b908f","#f9a3a4","#90ee7e","#f48024","#69d2e7"],grid:{borderColor:"#f1f1f1"},yaxis:{labels:{show:!0}},xaxis:{categories:t}}};return a}function o(e,t){let a=Number(e.reduce(((e,t)=>e+t),0).toFixed(2)),i={series:e,chartOptions:{labels:t,colors:["#34c38f","#5b73e8","#f1b44c","#50a5f1","#f46a6a"],legend:{show:!0,position:"bottom",horizontalAlign:"center",verticalAlign:"middle",floating:!1,fontSize:"14px",offsetX:0,offsetY:10},responsive:[{breakpoint:600,options:{chart:{height:240},legend:{show:!1}}}],dataLabels:{enabled:!0,formatter:function(e,t){return"S/ "+t.w.config.series[t.seriesIndex]},style:{fontSize:"14px",fontweight:"bold"}},plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",formatter:function(){return"S/ "+a}},style:{fontSize:"14px",fontweight:"bold"}}}}}}};return i}a.d(t,{$Y:function(){return i},C8:function(){return s},Md:function(){return o},Sr:function(){return l}})},8954:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var i=a(6252),s=a(3577);const l=(0,i._)("i",{class:"bx bx-check-circle"},null,-1),o=(0,i._)("i",{class:"bx bx-check-circle"},null,-1),r=(0,i._)("i",{class:"bx bx-check-circle"},null,-1),n=(0,i._)("i",{class:"bx bx-check-circle"},null,-1),d={class:"table-responsive mb-0"},c=(0,i._)("i",{class:"bx bx-check-circle"},null,-1),u={class:"table-responsive mb-0"};function h(e,t,a,h,p,f){const m=(0,i.up)("PageHeader"),g=(0,i.up)("BCol"),b=(0,i.up)("BRow"),w=(0,i.up)("BCardHeader"),C=(0,i.up)("BCardTitle"),S=(0,i.up)("BFormSelect"),_=(0,i.up)("apexchart"),T=(0,i.up)("BCardBody"),W=(0,i.up)("BCard"),y=(0,i.up)("BTable"),D=(0,i.up)("Layout");return(0,i.wg)(),(0,i.j4)(D,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,{title:p.title,items:e.items},null,8,["title","items"]),(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{lg:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{sm:"7"},{default:(0,i.w5)((()=>[l,(0,i.Uk)("   Inefectiva Gestor ")])),_:1}),(0,i.Wm)(g,{sm:"5"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Actualizado a las "+(0,s.zw)(p.ContrataDate),1)])),_:1})])),_:1})])),_:1}),(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Wm)(C,{class:"mb-4"}),(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{cols:"7"}),(0,i.Wm)(g,{cols:"5"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Filtrar por: "),(0,i.Wm)(S,{modelValue:p.CiudadId1,"onUpdate:modelValue":t[0]||(t[0]=e=>p.CiudadId1=e),size:"sm",options:p.Ciudades,onChange:t[1]||(t[1]=e=>f.getContrata())},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,i.Wm)(_,{class:"apex-charts",height:"350",type:"bar",dir:"ltr",series:p.ContrataBar.series,options:p.ContrataBar.chartOptions},null,8,["series","options"])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(g,{lg:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{sm:"7"},{default:(0,i.w5)((()=>[o,(0,i.Uk)("   Distrubución Inefectiva ")])),_:1}),(0,i.Wm)(g,{sm:"5"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Actualizado a las "+(0,s.zw)(p.MantenimientosDate),1)])),_:1})])),_:1})])),_:1}),(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Wm)(_,{class:"apex-charts",height:"320",type:"pie",dir:"ltr",series:p.pieChart2.series,options:p.pieChart2.chartOptions},null,8,["series","options"])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(g,{lg:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{sm:"7"},{default:(0,i.w5)((()=>[r,(0,i.Uk)("   Distrubución Reitero ")])),_:1}),(0,i.Wm)(g,{sm:"5"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Actualizado a las "+(0,s.zw)(p.InstalacionesDate),1)])),_:1})])),_:1})])),_:1}),(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Wm)(_,{class:"apex-charts",height:"320",type:"pie",dir:"ltr",series:p.pieChart.series,options:p.pieChart.chartOptions},null,8,["series","options"])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(g,{lg:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{sm:"7"},{default:(0,i.w5)((()=>[n,(0,i.Uk)("   Averías Reiteradas - Sup ")])),_:1}),(0,i.Wm)(g,{sm:"5"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Actualizado a las "+(0,s.zw)(p.SupDate),1)])),_:1})])),_:1})])),_:1}),(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{cols:"7"}),(0,i.Wm)(g,{cols:"5"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Filtrar por: "),(0,i.Wm)(S,{modelValue:p.CiudadId3,"onUpdate:modelValue":t[2]||(t[2]=e=>p.CiudadId3=e),size:"sm",options:p.Ciudades,onChange:t[3]||(t[3]=e=>f.getTableSup())},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,i._)("div",d,[(0,i.Wm)(y,{items:p.tableDataSup,fields:p.fieldsSup,responsive:"sm","per-page":p.perPageSup,"current-page":p.currentPageSup,"sort-by":p.sortBySup,"sort-desc":p.sortDescSup,filter:p.filterSup,"filter-included-fields":p.filterOnSup,onFiltered:f.onFilteredSup},null,8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(g,{lg:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{sm:"7"},{default:(0,i.w5)((()=>[c,(0,i.Uk)("   Averías Reiteradas - Tec ")])),_:1}),(0,i.Wm)(g,{sm:"5"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Actualizado a las "+(0,s.zw)(p.TecDate),1)])),_:1})])),_:1})])),_:1}),(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{cols:"7"}),(0,i.Wm)(g,{cols:"5"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Filtrar por: "),(0,i.Wm)(S,{modelValue:p.CiudadId4,"onUpdate:modelValue":t[4]||(t[4]=e=>p.CiudadId4=e),size:"sm",options:p.Ciudades,onChange:t[5]||(t[5]=e=>f.getTableTec())},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,i._)("div",u,[(0,i.Wm)(y,{items:p.tableDataTec,fields:p.fieldsTec,responsive:"sm","per-page":p.perPageTec,"current-page":p.currentPageTec,"sort-by":p.sortByTec,"sort-desc":p.sortDescTec,filter:p.filterTec,"filter-included-fields":p.filterOnTec,onFiltered:f.onFilteredTec},null,8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}a(560);var p=a(4642),f=a(1022),m=a(9900),g=a(381),b=a.n(g),w={components:{Layout:p.Z,PageHeader:f.Z},data(){return{title:"Mantenimiento",tableDataSup:[],tableDataTec:[],ContrataBar:[],pieChart:[],pieChart2:[],GestorAgenda:[],GestorOrdenes:[],GestorAgendaId:null,GestorOrdenId:null,Ciudades:[],CiudadId1:null,CiudadId2:null,CiudadId3:null,CiudadId4:null,totalRowsSup:1,currentPageSup:1,perPageSup:20,pageOptionsSup:[3,10,25,50,100],filterOnSup:[],filterSup:null,sortBySup:"age",sortDescSup:!1,fieldsSup:[],totalRowsTec:1,currentPageTec:1,perPageTec:20,pageOptionsTec:[3,10,25,50,100],filterOnTec:[],filterTec:null,sortByTec:"age",sortDescTec:!1,fieldsTec:[],ContrataDate:null,SupDate:null,TecDate:null,InstalacionesDate:null,MantenimientosDate:null}},mounted(){this.getCity(),this.getRatioInstalaciones(),this.getRatioMantenimientos()},methods:{formatearHora(e){const t=b()(e,["DD/MM/YYYY HH:mm:ss","YYYY-MM-DDTHH:mm:ss"]);return t.isValid()?t.format("HH:mm:ss"):": "+e},onFilteredSup(e){this.totalRowsSup=e.length,this.currentPageSup=1},onFilteredTec(e){this.totalRowsTec=e.length,this.currentPageTec=1},async getContrata(){null!=this.CiudadId1?this.$nextTick((async()=>{const e=4e3,t=this.$http.get(this.$apiURL+"maintenance/ineffectivecontratagraphic/"+this.CiudadId1),a=new Promise((t=>setTimeout(t,e))),i=await Promise.race([t,a]);if(i&&null!==i&&"series"in i.data&&i.data.series.length>0)this.ContrataBar={...(0,m.Sr)(i.data.series,i.data.categories)},localStorage.setItem("ineffective_contrata",JSON.stringify(i)),this.ContrataDate=this.formatearHora(i.data.date);else{const e=JSON.parse(localStorage.getItem("ineffective_contrata"));e?(this.ContrataBar={...(0,m.Sr)(e.data.series,e.data.categories)},this.ContrataDate=this.formatearHora(e.data.date)):this.ContrataBar={...(0,m.Sr)([],[])}}})):this.ContrataBar={...(0,m.Sr)([],[])}},async getTableSup(){null!=this.CiudadId3&&this.$nextTick((async()=>{const e=4e3,t=this.$http.get(this.$apiURL+"maintenance/childhoodbreakdownsmanagers/"+this.CiudadId3),a=new Promise((t=>setTimeout(t,e))),i=await Promise.race([t,a]);if(this.tableDataSup.splice(0,this.tableDataSup.length),this.fieldsSup.splice(0,this.fieldsSup.length),i&&null!==i&&"series"in i.data&&i.data.series.length>0)i.data.series.map((e=>this.tableDataSup.push({...e}))),i.data.fields.map((e=>this.fieldsSup.push({key:e,sortable:!0}))),this.totalRowsSup=this.tableDataSup.length,localStorage.setItem("childhood_break",JSON.stringify(i)),this.SupDate=this.formatearHora(i.data.date);else{const e=JSON.parse(localStorage.getItem("childhood_break"));e&&(e.data.series.map((e=>this.tableDataSup.push({...e}))),e.data.fields.map((e=>this.fieldsSup.push({key:e,sortable:!0}))),this.totalRowsSup=this.tableDataSup.length,this.SupDate=this.formatearHora(e.data.date))}}))},async getTableTec(){null!=this.CiudadId4&&this.$nextTick((async()=>{const e=4e3,t=this.$http.get(this.$apiURL+"maintenance/childhoodbreakdownstechnicians/"+this.CiudadId4),a=new Promise((t=>setTimeout(t,e))),i=await Promise.race([t,a]);if(this.tableDataTec.splice(0,this.tableDataTec.length),this.fieldsTec.splice(0,this.fieldsTec.length),i&&null!==i&&"series"in i.data&&i.data.series.length>0)i.data.series.map((e=>this.tableDataTec.push({...e}))),i.data.fields.map((e=>this.fieldsTec.push({key:e,sortable:!0}))),this.totalRowsTec=this.tableDataTec.length,localStorage.setItem("childhood_break_downs",JSON.stringify(i)),this.TecDate=this.formatearHora(i.data.date);else{const e=JSON.parse(localStorage.getItem("childhood_break_downs"));e&&(e.data.series.map((e=>this.tableDataTec.push({...e}))),e.data.fields.map((e=>this.fieldsTec.push({key:e,sortable:!0}))),this.totalRowsTec=this.tableDataTec.length,this.TecDate=this.formatearHora(e.data.date))}}))},async getCity(){try{const e=4e3,t=this.$http.get(this.$apiURL+"city/all"),a=new Promise((t=>setTimeout(t,e))),i=await Promise.race([t,a]);i&&i.data.data?(i.data.data.forEach((e=>this.Ciudades.push(e.name))),this.CiudadId1=this.Ciudades[0],this.CiudadId2=this.Ciudades[0],this.CiudadId3=this.Ciudades[0],this.CiudadId4=this.Ciudades[0]):(this.CiudadId1="Lima",this.CiudadId2="Lima",this.CiudadId3="Lima",this.CiudadId4="Lima"),this.getContrata(),this.getTableSup(),this.getTableTec()}catch(e){console.error(e)}},async getRatioInstalaciones(){try{const e=4e3,t=this.$http.get(this.$apiURL+"maintenance/childhoodbreakdownsgeneral"),a=new Promise((t=>setTimeout(t,e))),i=await Promise.race([t,a]);if(i&&null!==i&&"series"in i.data&&i.data.series.length>0)this.pieChart={...(0,m.C8)(i.data.series,i.data.categories)},localStorage.setItem("child_hood_break",JSON.stringify(i)),this.InstalacionesDate=this.formatearHora(i.data.date);else{const e=JSON.parse(localStorage.getItem("child_hood_break"));e?(this.pieChart={...(0,m.C8)(e.data.series,e.data.categories)},this.InstalacionesDate=this.formatearHora(e.data.date)):this.pieChart={...(0,m.C8)([],[])}}}catch(e){console.error(e)}},async getRatioMantenimientos(){try{const e=4e3,t=this.$http.get(this.$apiURL+"maintenance/ineffectivedistributionratiographic"),a=new Promise((t=>setTimeout(t,e))),i=await Promise.race([t,a]);if(i&&null!==i&&"series"in i.data&&i.data.series.length>0)this.pieChart2={...(0,m.C8)(i.data.series,i.data.categories)},localStorage.setItem("ineffective_distribution",JSON.stringify(i)),this.MantenimientosDate=this.formatearHora(i.data.date);else{const e=JSON.parse(localStorage.getItem("ineffective_distribution"));e?(this.pieChart2={...(0,m.C8)(e.data.series,e.data.categories)},this.MantenimientosDate=this.formatearHora(e.data.date)):this.pieChart2={...(0,m.C8)([],[])}}}catch(e){console.error(e)}}},middleware:"authentication"},C=a(3744);const S=(0,C.Z)(w,[["render",h]]);var _=S}}]);
//# sourceMappingURL=165.3965cefa.js.map