"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[307],{1022:function(e,t,s){s.d(t,{Z:function(){return c}});var r=s(6252),a=s(3577);const l={class:"page-title-box d-flex align-items-center justify-content-between"},o={class:"mb-0"},i={class:"page-title-right"};function u(e,t,s,u,n,d){const m=(0,r.up)("b-breadcrumb"),c=(0,r.up)("BCol"),p=(0,r.up)("BRow");return(0,r.wg)(),(0,r.j4)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",l,[(0,r._)("h4",o,(0,a.zw)(s.title),1),(0,r._)("div",i,[(0,r.Wm)(m,{items:s.items,class:"m-0"},null,8,["items"])])])])),_:1})])),_:1})}var n={props:{title:{type:String,default:""},items:{type:Array,default:()=>[]}}},d=s(3744);const m=(0,d.Z)(n,[["render",u]]);var c=m},6943:function(e,t,s){s.r(t),s.d(t,{default:function(){return $}});var r=s(6252),a=s(9963),l=s(3577);const o={class:"mt-4"},i={key:0,class:"invalid-feedback"},u={class:"mt-4"},n={key:0,class:"invalid-feedback"},d={class:"mt-4"},m={class:"mt-3 text-end"};function c(e,t,s,c,p,f){const w=(0,r.up)("PageHeader"),h=(0,r.up)("BCardTitle"),b=(0,r.up)("BFormInput"),g=(0,r.up)("BFormGroup"),v=(0,r.up)("BCol"),_=(0,r.up)("Multiselect"),$=(0,r.up)("BRow"),C=(0,r.up)("BButton"),W=(0,r.up)("BCardBody"),y=(0,r.up)("BCard"),k=(0,r.up)("Layout");return(0,r.wg)(),(0,r.j4)(k,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w,{title:p.title,items:e.items},null,8,["title","items"]),(0,r.Wm)($,null,{default:(0,r.w5)((()=>[(0,r.Wm)(v,{cols:"12"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{"no-body":""},{default:(0,r.w5)((()=>[(0,r.Wm)(W,null,{default:(0,r.w5)((()=>[(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Registrar usuario")])),_:1}),(0,r._)("form",{autocomplete:"off",class:"row no-gutters",onSubmit:t[3]||(t[3]=(0,a.iM)(((...t)=>e.submit&&e.submit(...t)),["prevent"]))},[(0,r.Wm)($,null,{default:(0,r.w5)((()=>[(0,r.Wm)(v,{lg:"4"},{default:(0,r.w5)((()=>[(0,r._)("div",o,[(0,r.Wm)(g,{id:"email-group",label:"Usuario",class:"mb-3","label-for":"username"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{id:"username",modelValue:p.user.username,"onUpdate:modelValue":t[0]||(t[0]=e=>p.user.username=e),type:"text",placeholder:"Ingresar usuario",class:(0,l.C_)({"is-invalid":p.submitted&&c.v$.user.username.$error})},null,8,["modelValue","class"]),p.submitted&&c.v$.user.username.required.$invalid?((0,r.wg)(),(0,r.iD)("div",i," Usuario es requerido. ")):(0,r.kq)("",!0)])),_:1})])])),_:1}),(0,r.Wm)(v,{lg:"4"},{default:(0,r.w5)((()=>[(0,r._)("div",u,[(0,r.Wm)(g,{id:"password-group",label:"Contraseña",class:"mb-3","label-for":"password"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{id:"password",modelValue:p.user.password,"onUpdate:modelValue":t[1]||(t[1]=e=>p.user.password=e),type:"password",placeholder:"Ingresar contraseña",class:(0,l.C_)({"is-invalid":p.submitted&&c.v$.user.password.$error})},null,8,["modelValue","class"]),p.submitted&&c.v$.user.password.required.$invalid?((0,r.wg)(),(0,r.iD)("div",n," Contraseña es requerida. ")):(0,r.kq)("",!0)])),_:1})])])),_:1}),(0,r.Wm)(v,{lg:"4"},{default:(0,r.w5)((()=>[(0,r._)("div",d,[(0,r.Wm)(g,{label:"Rol","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,r.w5)((()=>[(0,r.Wm)(_,{modelValue:p.user.role_id,"onUpdate:modelValue":t[2]||(t[2]=e=>p.user.role_id=e),required:"",options:p.roles.map((e=>({value:e.id,label:e.description}))),class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])])),_:1})])),_:1}),(0,r._)("div",m,[(0,r.Wm)(C,{variant:"primary",class:"w-sm",onClick:f.tryToRegisterIn},{default:(0,r.w5)((()=>[(0,r.Uk)("Register ")])),_:1},8,["onClick"])])],32)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}s(560);var p=s(5705),f=s(760),w=s(7091),h=s(4642),b=s(1022),g={components:{Multiselect:w.Z,Layout:h.Z,PageHeader:b.Z},setup(){return{v$:(0,p.Xw)()}},data(){return{user:{username:"user.name",password:"",role_id:""},roles:[],submitted:!1,tryingToRegister:!1,isRegisterError:!1,title:"NUEVO USUARIO"}},validations:{user:{username:{required:f.C1},password:{required:f.C1},role_id:{required:f.C1}}},computed:{notification(){return this.$store?this.$store.state.notification:null},notificationAutoCloseDuration(){return this.$store&&this.$store.state.notification?5:0}},mounted(){this.getRol()},methods:{async getRol(){try{const e=await this.$http.get(this.$apiURL+"role/all"),t=e.data.data;t.forEach((e=>{this.roles.push(e)})),console.log(this.roles)}catch(e){console.error("Error fetching roles:",e)}},tryToRegisterIn(){if(this.submitted=!0,this.v$.$touch(),!this.v$.$invalid){const{username:e,password:t}=this.user;e&&t&&this.$http.post(this.$apiURL+"user/store",this.user,{}).then((e=>{200==e.status&&(this.$swal({title:"Completado!",text:e.data.message,icon:"success",confirmButtonColor:"#6457A2"}),setTimeout((()=>{window.location.reload()}),2e3))})).catch((e=>{console.error(e),this.$swal({icon:"error",title:"Oops...",text:e})}))}}}},v=s(3744);const _=(0,v.Z)(g,[["render",c]]);var $=_}}]);
//# sourceMappingURL=307.cb46f2b1.js.map