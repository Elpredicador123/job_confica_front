"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[318],{3318:function(e,l,t){t.r(l),t.d(l,{default:function(){return K}});var i=t(6252);const s={id:"tickets-table_length",class:"dataTables_length"},a={class:"d-inline-flex align-items-center"},o={class:"col-sm-12 col-md-6"},n={id:"tickets-table_filter",class:"dataTables_filter text-md-end"},r={class:"d-inline-flex align-items-center"},d={class:"table-responsive mb-0"},u=["innerHTML"],p=["innerHTML"],m={class:"dataTables_paginate paging_simple_numbers float-end"},c={class:"pagination pagination-rounded mb-0"};function f(e,l,t,f,g,h){const w=(0,i.up)("PageHeader"),_=(0,i.up)("BCardTitle"),y=(0,i.up)("BFormSelect"),b=(0,i.up)("BCol"),D=(0,i.up)("BFormInput"),v=(0,i.up)("BRow"),F=(0,i.up)("BButton"),W=(0,i.up)("BTable"),k=(0,i.up)("BPagination"),z=(0,i.up)("BCardBody"),B=(0,i.up)("BCard"),U=(0,i.up)("NewsModal"),V=(0,i.up)("Layout");return(0,i.wg)(),(0,i.j4)(V,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{title:g.title,items:g.items},null,8,["title","items"]),(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i.Wm)(b,{cols:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(B,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(z,null,{default:(0,i.w5)((()=>[(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Data Table")])),_:1}),(0,i.Wm)(v,{class:"mt-4"},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{sm:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i._)("label",a,[(0,i.Uk)(" Show  "),(0,i.Wm)(y,{modelValue:g.perPage,"onUpdate:modelValue":l[0]||(l[0]=e=>g.perPage=e),size:"sm",options:g.pageOptions},null,8,["modelValue","options"]),(0,i.Uk)(" entries ")])])])),_:1}),(0,i._)("div",o,[(0,i._)("div",n,[(0,i._)("label",r,[(0,i.Uk)(" Search: "),(0,i.Wm)(D,{modelValue:g.filter,"onUpdate:modelValue":l[1]||(l[1]=e=>g.filter=e),type:"search",placeholder:"Search...",class:"form-control form-control-sm ms-2"},null,8,["modelValue"])])])])])),_:1}),(0,i._)("div",d,[(0,i.Wm)(W,{items:g.tableData,fields:g.fields,responsive:"sm","per-page":g.perPage,"current-page":g.currentPage,"sort-by":g.sortBy,"sort-desc":g.sortDesc,filter:g.filter,"filter-included-fields":g.filterOn,onFiltered:h.onFiltered},{"cell(actions)":(0,i.w5)((({item:e})=>[(0,i.Wm)(F,{onClick:l=>h.editItem(e),variant:"info"},{default:(0,i.w5)((()=>[(0,i.Uk)("Editar")])),_:2},1032,["onClick"])])),"cell(title)":(0,i.w5)((e=>[(0,i._)("div",{innerHTML:e.item.title},null,8,u)])),"cell(description)":(0,i.w5)((e=>[(0,i._)("div",{innerHTML:e.item.description},null,8,p)])),_:1},8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])]),(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i._)("div",m,[(0,i._)("ul",c,[(0,i.Wm)(k,{modelValue:g.currentPage,"onUpdate:modelValue":l[2]||(l[2]=e=>g.currentPage=e),"total-rows":g.totalRows,"per-page":g.perPage},null,8,["modelValue","total-rows","per-page"])])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.Wm)(U,{ref:"NewsModal"},null,512)])),_:1})}t(560);var g=t(4642),h=t(1022),w=t(9963),_=t(3577),y=t(2381);const b={class:"vuePicDatePicker"},D={class:"form-group mb-3"},v=(0,i._)("label",null,"Default Date Picker",-1),F=(0,i._)("br",null,null,-1),W=(0,i._)("p",{class:"text-muted"}," DropzoneJS is an open source library that provides drag’n’drop file uploads with image previews. ",-1),k={class:"list-unstyled mb-0",id:"dropzone-preview2"},z={class:"mt-2",id:"dropzone-preview-list2"},B={class:"d-flex p-2"},U=(0,i._)("div",{class:"flex-shrink-0 me-3"},[(0,i._)("div",{class:"avatar-sm bg-light rounded"},[(0,i._)("img",{class:"img-fluid rounded d-block",src:y,alt:"Dropzone-Image"})])],-1),V={class:"flex-grow-1"},P={class:"pt-1"},C={class:"fs-md mb-1"},M={class:"fs-sm text-muted mb-0"},x=(0,i._)("strong",{class:"error text-danger"},null,-1),O={class:"flex-shrink-0 ms-3"};function R(e,l,t,s,a,o){const n=(0,i.up)("BCardTitle"),r=(0,i.up)("VueDatePicker"),d=(0,i.up)("BCardBody"),u=(0,i.up)("BCard"),p=(0,i.up)("BCol"),m=(0,i.up)("ckeditor"),c=(0,i.up)("DropZone"),f=(0,i.up)("BButton"),g=(0,i.up)("BRow"),h=(0,i.up)("BModal");return(0,i.wg)(),(0,i.j4)(h,{modelValue:a.isOpen,"onUpdate:modelValue":l[7]||(l[7]=e=>a.isOpen=e),size:"xl","hide-footer":""},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{cols:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Editar Noticias")])),_:1}),(0,i._)("form",{class:"needs-validation",onSubmit:l[6]||(l[6]=(0,w.iM)(((...e)=>o.submit&&o.submit(...e)),["prevent"]))},[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{lg:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i._)("div",b,[(0,i._)("div",D,[v,F,(0,i.Wm)(r,{modelValue:a.news.date,"onUpdate:modelValue":l[0]||(l[0]=e=>a.news.date=e),"model-type":"yyyy-MM-dd HH:mm:ss"},null,8,["modelValue"])])])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(p,{cols:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Titulo")])),_:1}),(0,i.Wm)(m,{modelValue:a.news.title,"onUpdate:modelValue":l[1]||(l[1]=e=>a.news.title=e),editor:a.editor_title},null,8,["modelValue","editor"])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(p,{cols:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Descripción")])),_:1}),(0,i.Wm)(m,{modelValue:a.news.description,"onUpdate:modelValue":l[2]||(l[2]=e=>a.news.description=e),editor:a.editor_description},null,8,["modelValue","editor"])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(p,{lg:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{"no-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"mb-1"},{default:(0,i.w5)((()=>[(0,i.Uk)("Dropzone")])),_:1}),W,(0,i._)("div",null,[(0,i.Wm)(c,{files:"files",cloudIcon:"remix",dropzoneFile:"galleryDropzoneFile",isMultiple:!0,onDrop:l[3]||(l[3]=(0,w.iM)((e=>o.galleryDrop(e)),["prevent"])),onChange:o.gallerySelectedFile,onDragenter:l[4]||(l[4]=(0,w.iM)((()=>{}),["prevent"])),onDragover:l[5]||(l[5]=(0,w.iM)((()=>{}),["prevent"]))},null,8,["onChange"])]),(0,i._)("ul",k,[(0,i._)("li",z,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.galleryFiles,((e,l)=>((0,i.wg)(),(0,i.iD)("div",{class:"border rounded mb-1",key:l},[(0,i._)("div",B,[U,(0,i._)("div",V,[(0,i._)("div",P,[(0,i._)("h5",C,"   "+(0,_.zw)(e.name),1),(0,i._)("p",M,[(0,i._)("strong",null,(0,_.zw)(e.size/1024),1),(0,i.Uk)(" KB ")]),x])]),(0,i._)("div",O,[(0,i.Wm)(f,{size:"sm",variant:"danger",onClick:()=>o.deleteRecord(e)},{default:(0,i.w5)((()=>[(0,i.Uk)("Delete")])),_:2},1032,["onClick"])])])])))),128))])])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,{type:"submit",variant:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)("Submit")])),_:1})])),_:1})])),_:1})],32)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}var S=t(4e3),T=t.n(S),N=t(5234),I=t.n(N),$=t(79),L=t(4580),Z={components:{ckeditor:T().component,DropZone:$.Z,VueDatePicker:L.Z},data(){return{title:"NUEVA INFOGRAFÍA",isOpen:!1,items:[{text:"Infografías",href:"/infografias/create"},{text:"Nueva Inforgrafía",active:!0}],news:{},dPDefaultDate:null,galleryDropzoneFile:"",galleryFiles:[],DropFile:[],editor_title:I(),editor_description:I()}},methods:{open(e){const l=JSON.parse(localStorage.getItem("user"));this.isOpen=!0,this.news.title=e.title,this.news.description=e.description,this.news.date=e.date,this.news.id=e.id,this.news.user_id=l.id,this.galleryFiles=[],console.log(e.images),this.loadFilesFromUrls(e.images)},loadFilesFromUrls(e){const l=e.map((e=>fetch(e.url).then((e=>e.blob())).then((l=>{const t=e.url.split("/").pop();return new File([l],t,{type:l.type})}))));Promise.all(l).then((e=>{this.galleryFiles=e})).catch((e=>console.error("Error loading files:",e)))},updateDropZoneWithFileList(e){const l=document.createElement("input");l.type="file",l.files=e,this.$refs.dropzone&&this.$refs.dropzone.handleFiles(l.files)},updateDropZone(e){this.$refs.dropzone.setFiles(e)},close(){this.isOpen=!1,this.selectedItem=null},deleteRecord(e){console.log("call Delet"),e.id&&(this.galleryFiles=this.galleryFiles.filter((l=>l.id!=e.id)))},galleryDrop(e){e.preventDefault(),this.galleryDropzoneFile=e.dataTransfer.files,this.galleryFiles.push(this.galleryDropzoneFile)},gallerySelectedFile(){this.galleryDropzoneFile=document.querySelector(".galleryDropzoneFile").files,this.DropFile.push(this.galleryDropzoneFile);const e=Object.values(this.galleryDropzoneFile).map((e=>({name:e.name,lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,webkitRelativePath:e.webkitRelativePath,size:e.size})));this.galleryFiles.push(...e),this.galleryFiles=this.galleryFiles.map(((e,l)=>({id:l+1,...e})))},async submit(){let e=new FormData;if(Object.keys(this.news).forEach((l=>{e.append(l,this.news[l])})),console.log(this.DropFile),this.DropFile&&this.DropFile.length>0)for(let l=0;l<this.DropFile.length;l++)e.append("files",this.DropFile[l][0]);console.log(e),this.$http.put(this.$apiURL+"news/update/"+this.news.id,e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{200==e.status&&(console.log(e),this.$swal({title:"Completado!",text:e.data.message,icon:"success",confirmButtonColor:"#6457A2"}),this.$swal("Completado!",e.data.message,"success"))})).catch((e=>{console.error(e),this.$swal({icon:"error",title:"Oops...",text:e})}))}}},H=t(3744);const E=(0,H.Z)(Z,[["render",R]]);var j=E,A={components:{Layout:g.Z,PageHeader:h.Z,NewsModal:j},data(){return{tableData:[],title:"Noticias",items:[{text:"Noticias",href:"/news/index"},{text:"Listado",active:!0}],totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:null,filterOn:[],sortBy:"age",sortDesc:!1,fields:[{key:"id",sortable:!0},{key:"title",sortable:!0},{key:"description",sortable:!0},{key:"date",sortable:!0},{key:"user_id",sortable:!0},{key:"actions"}]}},mounted(){this.totalRows=this.items.length,this.getData()},methods:{onFiltered(e){this.totalRows=e.length,this.currentPage=1},async getData(){try{const e=await this.$http.get(this.$apiURL+"news/all");e.data.data.map((e=>this.tableData.push({...e}))),this.totalRows=this.tableData.length}catch(e){console.error(e)}},editItem(e){console.log("Editar item",e),this.selectedItem=JSON.parse(JSON.stringify(e)),this.$refs.NewsModal.open(this.selectedItem)}}};const J=(0,H.Z)(A,[["render",f]]);var K=J}}]);
//# sourceMappingURL=318.71f5aad6.js.map