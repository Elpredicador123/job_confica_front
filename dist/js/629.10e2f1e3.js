"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[629],{7599:function(e,t,l){l.r(t),l.d(t,{default:function(){return R}});var i=l(6252),a=l(9963),n=l(3577);const o={class:"app-calendar"},s={class:"app-calendar"},d={class:"mb-3"},r=(0,i._)("label",{for:"name",class:"form-label"},"Event Name",-1),c={class:"mb-3"},u=(0,i._)("label",{class:"control-label form-label"},"Category",-1),h=["value"],m={class:"mb-3"},p=(0,i._)("label",{for:"name",class:"form-label"},"Event Name",-1),v={class:"mb-3"},f=(0,i._)("label",{class:"control-label form-label"},"Category",-1),b=["value"],w={class:"mb-3"},y=(0,i._)("label",{for:"description",class:"form-label"},"Descripción",-1),g={class:"mb-3"},_=(0,i._)("label",{for:"numberOfPeople",class:"form-label"},"Número de Personas",-1);function M(e,t,l,M,D,E){const W=(0,i.up)("PageHeader"),C=(0,i.up)("BCardTitle"),k=(0,i.up)("BCardText"),x=(0,i.up)("BCarouselSlide"),T=(0,i.up)("BCarousel"),$=(0,i.up)("BCardBody"),Z=(0,i.up)("BCard"),U=(0,i.up)("BCol"),B=(0,i.up)("BRow"),V=(0,i.up)("FullCalendar"),L=(0,i.up)("BModal"),N=(0,i.up)("Layout");return(0,i.wg)(),(0,i.j4)(N,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{title:D.title,items:D.items},null,8,["title","items"]),(0,i.Wm)(B,null,{default:(0,i.w5)((()=>[(0,i.Wm)(U,{cols:"8"},{default:(0,i.w5)((()=>[(0,i.Wm)(B,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(D.tableData,(e=>((0,i.wg)(),(0,i.j4)(U,{cols:"12",key:e.id},{default:(0,i.w5)((()=>[(0,i.Wm)(Z,null,{default:(0,i.w5)((()=>[(0,i.Wm)($,null,{default:(0,i.w5)((()=>[(0,i.Wm)(C,{innerHTML:e.title},null,8,["innerHTML"]),(0,i.Wm)(k,{innerHTML:e.description},null,8,["innerHTML"]),(0,i.Wm)(T,{interval:3e3,style:{"text-shadow":"0px 0px 2px #000",width:"75%",margin:"0 auto"},controls:"",id:"carousel"+e.id},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.images,(e=>((0,i.wg)(),(0,i.j4)(x,{key:e.id,"img-src":E.getFullImageUrl(e.url)},null,8,["img-src"])))),128))])),_:2},1032,["id"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,i.Wm)(U,{cols:"4"},{default:(0,i.w5)((()=>[(0,i.Wm)(B,null,{default:(0,i.w5)((()=>[(0,i.Wm)(U,{cols:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(Z,{"np-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)($,null,{default:(0,i.w5)((()=>[(0,i._)("div",o,[(0,i.Wm)(V,{ref:"fullCalendar",options:D.calendarOptions2},null,8,["options"])])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(U,{cols:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(Z,{"np-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)($,null,{default:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i.Wm)(V,{ref:"fullCalendar",options:D.calendarOptions},null,8,["options"])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.Wm)(L,{modelValue:D.eventModal,"onUpdate:modelValue":t[3]||(t[3]=e=>D.eventModal=e),title:"Edit Event","title-class":"font-18","hide-footer":"","body-class":"p-3"},{default:(0,i.w5)((()=>[(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,a.iM)(((...e)=>E.editSubmit&&E.editSubmit(...e)),["prevent"]))},[(0,i.Wm)(B,null,{default:(0,i.w5)((()=>[(0,i.Wm)(U,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",d,[r,(0,i.wy)((0,i._)("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>D.editevent.editTitle=e),type:"text",class:"form-control",placeholder:"Insert Event name"},null,512),[[a.nr,D.editevent.editTitle]])])])),_:1}),(0,i.Wm)(U,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",c,[u,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>D.editevent.editcategory=e),class:"form-control",name:"category"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(D.categories,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.backgroundColor,value:`${e.value}`},(0,n.zw)(e.name),9,h)))),128))],512),[[a.bM,D.editevent.editcategory]])])])),_:1})])),_:1})],32)])),_:1},8,["modelValue"]),(0,i.Wm)(L,{modelValue:D.eventModal2,"onUpdate:modelValue":t[8]||(t[8]=e=>D.eventModal2=e),title:"Detail Event","title-class":"font-18","hide-footer":"","body-class":"p-3"},{default:(0,i.w5)((()=>[(0,i.Wm)(B,null,{default:(0,i.w5)((()=>[(0,i.Wm)(U,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",m,[p,(0,i.wy)((0,i._)("input",{id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>D.editevent2.editTitle=e),type:"text",class:"form-control",placeholder:"Insert Event name"},null,512),[[a.nr,D.editevent2.editTitle]])])])),_:1}),(0,i.Wm)(U,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",v,[f,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>D.editevent2.editcategory=e),class:"form-control",name:"category"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(D.categories,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.backgroundColor,value:`${e.value}`},(0,n.zw)(e.name),9,b)))),128))],512),[[a.bM,D.editevent2.editcategory]])])])),_:1}),(0,i.Wm)(U,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",w,[y,(0,i.wy)((0,i._)("textarea",{id:"description","onUpdate:modelValue":t[6]||(t[6]=e=>D.editevent2.editDescription=e),class:"form-control",placeholder:"Descripción del evento"},null,512),[[a.nr,D.editevent2.editDescription]])])])),_:1}),(0,i.Wm)(U,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",g,[_,(0,i.wy)((0,i._)("input",{id:"numberOfPeople","onUpdate:modelValue":t[7]||(t[7]=e=>D.editevent2.editNumber_of_people=e),type:"number",class:"form-control",placeholder:"Número de personas"},null,512),[[a.nr,D.editevent2.editNumber_of_people]])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}l(560);var D=l(4813),E=l(6993),W=l(1029),C=l(9897),k=l(325),x=l(7292),T=l(5705),$=l(760),Z=l(6455),U=l.n(Z),B=l(5172),V=l(1022),L=l(6286),N=l(2298),S={components:{FullCalendar:D.Z,Layout:B.Z,PageHeader:V.Z},setup(){return{v$:(0,T.Xw)()}},data(){return{title:"Calendar",items:[{text:"Minible"},{text:"Calendar",active:!0}],calendarEvents:[],calendarOptions:{eventDrop:this.handleEventDrop,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},plugins:[E.Z,W.Z,C.ZP,k.Z,x.Z],initialView:"dayGridMonth",themeSystem:"bootstrap",initialEvents:[],editable:!0,droppable:!0,eventResizableFromStart:!0,eventClick:this.editEvent,eventsSet:this.handleEvents,weekends:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0},calendarOptions2:{eventDrop:this.handleEventDrop,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},plugins:[E.Z,W.Z,C.ZP,k.Z,x.Z],initialView:"dayGridMonth",themeSystem:"bootstrap",initialEvents:[],editable:!0,droppable:!0,eventResizableFromStart:!0,eventClick:this.editEvent2,eventsSet:this.handleEvents,weekends:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0},currentEvents:[],tableData:[],showModal:!1,eventModal:!1,eventModal2:!1,categories:L.b,submitted:!1,submit:!1,newEventData:{},edit:{},deleteId:{},event:{title:"",category:""},editevent:{editTitle:"",editcategory:""},editevent2:{editTitle:"",editCategory:"",editNumber_of_people:null,editDescription:""}}},validations:{event:{title:{required:$.C1},category:{required:$.C1}}},mounted(){this.getData(),this.getData2(),this.getDataNews()},methods:{async getDataNews(){try{const e=await this.$http.get(this.$apiURL+"news/principal");e.data.data.map((e=>this.tableData.push({...e}))),this.totalRows=this.tableData.length}catch(e){console.error(e)}},getFullImageUrl(e){return console.log(e),this.$storageURL+"/"+e},async getData(){try{const e=await this.$http.get(this.$apiURL+"birthday/all");this.calendarOptions.events=e.data.data,console.log(this.calendarOptions.events)}catch(e){console.error(e)}},async getData2(){try{const e=await this.$http.get(this.$apiURL+"reservation/all");this.calendarOptions2.events=e.data.data,console.log(this.calendarOptions2.events)}catch(e){console.error(e)}},handleSubmit(){if(this.submitted=!0,this.v$.$touch(),this.v$.$invalid)return;const e=(0,N.Z)(new Date(this.newEventData.date),"yyyy-MM-dd"),t={title:this.event.title,start:e,end:e,user_id:1};this.$http.post(this.$apiURL+"birthday/store",t).then((e=>{console.log(e),this.successmsg(),this.showModal=!1,this.getData()})).catch((e=>{console.error(e)})),this.submitted=!1,this.event={}},handleEventDrop(e){console.log(e);const t=(0,N.Z)(new Date(e.event.start),"yyyy-MM-dd"),l=e.event.end?(0,N.Z)(new Date(e.event.end),"yyyy-MM-dd"):t,i={title:e.event.title,start:t,end:l,id:parseInt(e.event.id)};this.updateEvent(e.event.id,i)},updateEvent(e,t){console.log(e,t),this.$http.post(this.$apiURL+"birthday/store",t).then((e=>{console.log(e),this.successmsg(),this.showModal=!1,this.getData()})).catch((e=>{console.error(e)}))},hideModal(){this.submitted=!1,this.showModal=!1,this.event={}},editSubmit(){console.log(this.editevent);const e={title:this.editevent.editTitle,id:parseInt(this.edit.id)};this.updateEvent(this.edit.id,e),this.closeModal()},deleteEvent(){this.edit.remove(),this.eventModal=!1},editEvent(e){this.edit=e.event,this.editevent.editTitle=this.edit.title,this.editevent.editcategory=this.edit.classNames[0],this.eventModal=!0},editEvent2(e){console.log(e),this.edit=e.event,this.editevent2.editTitle=this.edit.title,this.editevent2.editDescription=this.edit.extendedProps.description,this.editevent2.editNumber_of_people=this.edit.extendedProps.number_of_people,this.editevent2.editcategory=this.edit.classNames[0],this.eventModal2=!0},closeModal(){this.eventModal=!1,this.eventModal2=!1},confirm(){U().fire({title:"Are you sure?",text:"You won't be able to delete this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then((e=>{e.value&&(this.deleteEvent(),U().fire("Deleted!","Event has been deleted.","success"))}))},handleEvents(e){this.currentEvents=e},successmsg(){U().fire({position:"center",icon:"success",title:"Event has been saved",showConfirmButton:!1,timer:1e3})}}},H=l(3744);const O=(0,H.Z)(S,[["render",M]]);var R=O}}]);
//# sourceMappingURL=629.10e2f1e3.js.map