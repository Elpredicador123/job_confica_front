"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[953],{4656:function(e,t,l){l.r(t),l.d(t,{default:function(){return $}});var o=l(6252);const a={id:"tickets-table_length",class:"dataTables_length"},i={class:"d-inline-flex align-items-center"},r={class:"col-sm-12 col-md-6"},s={id:"tickets-table_filter",class:"dataTables_filter text-md-end"},n={class:"d-inline-flex align-items-center"},m={class:"table-responsive mb-0"},d={class:"dataTables_paginate paging_simple_numbers float-end"},u={class:"pagination pagination-rounded mb-0"};function c(e,t,l,c,f,p){const _=(0,o.up)("PageHeader"),b=(0,o.up)("BCardTitle"),w=(0,o.up)("BFormSelect"),h=(0,o.up)("BCol"),g=(0,o.up)("BFormInput"),W=(0,o.up)("BRow"),v=(0,o.up)("BButton"),V=(0,o.up)("BTable"),y=(0,o.up)("BPagination"),q=(0,o.up)("BCardBody"),k=(0,o.up)("BCard"),B=(0,o.up)("LiquidacionModal"),U=(0,o.up)("Layout");return(0,o.wg)(),(0,o.j4)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_,{title:f.title,items:f.items},null,8,["title","items"]),(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{"no-body":""},{default:(0,o.w5)((()=>[(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Data Table")])),_:1}),(0,o.Wm)(W,{class:"mt-4"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{sm:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o._)("div",a,[(0,o._)("label",i,[(0,o.Uk)(" Show  "),(0,o.Wm)(w,{modelValue:f.perPage,"onUpdate:modelValue":t[0]||(t[0]=e=>f.perPage=e),size:"sm",options:f.pageOptions},null,8,["modelValue","options"]),(0,o.Uk)(" entries ")])])])),_:1}),(0,o._)("div",r,[(0,o._)("div",s,[(0,o._)("label",n,[(0,o.Uk)(" Search: "),(0,o.Wm)(g,{modelValue:f.filter,"onUpdate:modelValue":t[1]||(t[1]=e=>f.filter=e),type:"search",placeholder:"Search...",class:"form-control form-control-sm ms-2"},null,8,["modelValue"])])])])])),_:1}),(0,o._)("div",m,[(0,o.Wm)(V,{items:f.tableData,fields:f.fields,responsive:"sm","per-page":f.perPage,"current-page":f.currentPage,"sort-by":f.sortBy,"sort-desc":f.sortDesc,filter:f.filter,"filter-included-fields":f.filterOn,onFiltered:p.onFiltered},{"cell(actions)":(0,o.w5)((({item:e})=>[(0,o.Wm)(v,{onClick:t=>p.editItem(e),variant:"info"},{default:(0,o.w5)((()=>[(0,o.Uk)("Editar")])),_:2},1032,["onClick"])])),_:1},8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])]),(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o._)("div",d,[(0,o._)("ul",u,[(0,o.Wm)(y,{modelValue:f.currentPage,"onUpdate:modelValue":t[2]||(t[2]=e=>f.currentPage=e),"total-rows":f.totalRows,"per-page":f.perPage},null,8,["modelValue","total-rows","per-page"])])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(B,{ref:"LiquidacionModal"},null,512)])),_:1})}l(560);var f=l(5172),p=l(1022),_=l(9963);const b={class:"mt-4"},w={class:"mt-4"},h={class:"mt-4"},g={class:"mt-4"},W={class:"mt-4"},v={class:"mt-4"},V={class:"mt-4"},y={class:"mt-4"},q={class:"mt-4"},k={class:"mt-4"},B={class:"mt-4"},U={class:"mt-4"};function C(e,t,l,a,i,r){const s=(0,o.up)("BCardTitle"),n=(0,o.up)("BFormInput"),m=(0,o.up)("BFormGroup"),d=(0,o.up)("BCol"),u=(0,o.up)("Multiselect"),c=(0,o.up)("BRow"),f=(0,o.up)("BButton"),p=(0,o.up)("BCardBody"),C=(0,o.up)("BCard"),P=(0,o.up)("BModal");return(0,o.wg)(),(0,o.j4)(P,{modelValue:i.isOpen,"onUpdate:modelValue":t[13]||(t[13]=e=>i.isOpen=e),size:"xl","hide-footer":""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{"no-body":""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Editar Orden")])),_:1}),(0,o._)("form",{autocomplete:"off",class:"row no-gutters",onSubmit:t[12]||(t[12]=(0,_.iM)(((...e)=>r.submit&&r.submit(...e)),["prevent"]))},[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{lg:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",b,[(0,o.Wm)(m,{label:"Codigo de requerimiento","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{type:"text",modelValue:i.form.codigo_requerimiento,"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.codigo_requerimiento=e),placeholder:"CÒDIGO SIN ESPACIOS",required:"",id:"formrow-firstname-input"},null,8,["modelValue"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",w,[(0,o.Wm)(m,{label:"Tipo de requerimiento","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form.tipo_requerimiento,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.tipo_requerimiento=e),options:i.requerimientos,required:"",class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",h,[(0,o.Wm)(m,{label:"Tipo de cierre","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form.tipo_cierre,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.tipo_cierre=e),required:"",options:i.cierres,class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",g,[(0,o.Wm)(m,{label:"CF Técnico","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:i.form.cf,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.cf=e),required:"",type:"text",onInput:t[4]||(t[4]=e=>r.getTecnicos()),id:"formrow-firstname-input"},null,8,["modelValue"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",W,[(0,o.Wm)(m,{label:"Técnico","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:i.form.tecnico,"onUpdate:modelValue":t[5]||(t[5]=e=>i.form.tecnico=e),required:"",type:"text",id:"formrow-firstname-input",disabled:""},null,8,["modelValue"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",v,[(0,o.Wm)(m,{label:"Zonal","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{type:"text",required:"",modelValue:i.form.zonal,"onUpdate:modelValue":t[6]||(t[6]=e=>i.form.zonal=e),id:"formrow-firstname-input",disabled:""},null,8,["modelValue"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",V,[(0,o.Wm)(m,{label:"Número de referencia","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:i.form.numero_referencia,"onUpdate:modelValue":t[7]||(t[7]=e=>i.form.numero_referencia=e),required:"",type:"text",id:"formrow-firstname-input"},null,8,["modelValue"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",y,[(0,o.Wm)(m,{label:"Efectividad","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form.efectividad,"onUpdate:modelValue":t[8]||(t[8]=e=>i.form.efectividad=e),options:i.efectividades,required:"",class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",q,[(0,o.Wm)(m,{label:"Nota NPS","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form.nota_nps,"onUpdate:modelValue":t[9]||(t[9]=e=>i.form.nota_nps=e),required:"",options:i.notas,class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",k,[(0,o.Wm)(m,{label:"Posible detractor","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form.detractor,"onUpdate:modelValue":t[10]||(t[10]=e=>i.form.detractor=e),required:"",options:i.posibles,class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"12"},{default:(0,o.w5)((()=>[(0,o._)("div",B,[(0,o.Wm)(m,{label:"Tipo de cierre","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("textarea",{id:"message","onUpdate:modelValue":t[11]||(t[11]=e=>i.form.observaciones=e),class:"form-control"},null,512),[[_.nr,i.form.observaciones]])])),_:1})])])),_:1})])),_:1}),(0,o._)("div",U,[(0,o.Wm)(f,{type:"submit",variant:"primary",onSubmit:(0,_.iM)(r.submit,["prevent"])},{default:(0,o.w5)((()=>[(0,o.Uk)("Actualizar")])),_:1},8,["onSubmit"])])],32)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}var P=l(381),x=l.n(P),I=l(7091),O={components:{Multiselect:I.Z},data(){return{isOpen:!1,selectedItem:null,value:null,requerimientos:["Alta","Averia"],cierres:["Completado","Suspendido","Devuelto","Pendiente"],efectividades:["Efectiva","Inefectiva","Inefectiva recuperada"],notas:["Detractor (0-5)","Neutro (6-7)","Promotor (8-9)","No aplica"],posibles:["Si","No","No aplica"],form:{}}},mounted(){this.initForm()},methods:{initForm(){this.form={zonal:null,tecnico:null,cf:"",codigo_requerimiento:null,tipo_requerimiento:null,tipo_cierre:null,numero_referencia:null,efectividad:null,nota_nps:null,detractor:null,observaciones:null,contrata:"",usuario:"admin",fecha:x()().format("YYYY-MM-DD"),id:null}},open(e){this.isOpen=!0,this.form=e},saveChanges(){this.$emit("edit-complete",this.selectedItem),this.close()},close(){this.isOpen=!1,this.selectedItem=null},async getTecnicos(){try{this.$nextTick((async()=>{if(console.log(this.form.cf),""==this.form.cf)this.form.tecnico=null,this.form.zonal=null,this.form.contrata=null;else{const e=await this.$http.get(this.$apiURL+"technical/carnet/"+this.form.cf);null!=e.data&&e.data.data?(this.form.tecnico=e.data.data.Nombre_Completo||null,this.form.zonal=e.data.data.Zonal||null,this.form.contrata=e.data.data.Contrata||null):(this.form.tecnico=null,this.form.zonal=null,this.form.contrata=null)}}))}catch(e){console.error(e)}},async submit(){this.$http.put(this.$apiURL+"order/update/"+this.form.id,this.form,{}).then((e=>{200==e.status&&(console.log(e),this.$swal({title:"Completado!",text:e.data.message,icon:"success",confirmButtonColor:"#6457A2"}),this.$swal("Completado!",e.data.message,"success"),this.initForm())})).catch((e=>{console.error(e),this.$swal({icon:"error",title:"Oops...",text:e})}))}}},S=l(3744);const T=(0,S.Z)(O,[["render",C]]);var D=T,F={components:{Layout:f.Z,PageHeader:p.Z,LiquidacionModal:D},data(){return{tableData:[],title:"Liquidaciones",items:[{text:"Liquidaciones",href:"/liquidacion/index"},{text:"Listado",active:!0}],totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:null,filterOn:[],sortBy:"age",sortDesc:!1,fields:[{key:"codigo_requerimiento",sortable:!0},{key:"tipo_requerimiento",sortable:!0},{key:"tipo_cierre",sortable:!0},{key:"tecnico",sortable:!0},{key:"zonal",sortable:!0},{key:"contrata",sortable:!0},{key:"fecha",sortable:!0},{key:"efectividad",sortable:!0},{key:"nota_nps",sortable:!0},{key:"detractor",sortable:!0},{key:"actions"}]}},mounted(){this.totalRows=this.items.length,this.getData()},methods:{onFiltered(e){this.totalRows=e.length,this.currentPage=1},async getData(){try{const e=await this.$http.get(this.$apiURL+"order/all");e.data.data.map((e=>this.tableData.push({...e}))),this.totalRows=this.tableData.length}catch(e){console.error(e)}},editItem(e){console.log("Editar item",e),this.selectedItem=JSON.parse(JSON.stringify(e)),this.$refs.LiquidacionModal.open(this.selectedItem)}}};const L=(0,S.Z)(F,[["render",c]]);var $=L}}]);
//# sourceMappingURL=953.d1cbed45.js.map