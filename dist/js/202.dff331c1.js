"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[202],{1022:function(e,t,i){i.d(t,{Z:function(){return h}});var l=i(6252),n=i(3577);const a={class:"page-title-box d-flex align-items-center justify-content-between"},s={class:"mb-0"},o={class:"page-title-right"};function d(e,t,i,d,r,c){const u=(0,l.up)("b-breadcrumb"),h=(0,l.up)("BCol"),v=(0,l.up)("BRow");return(0,l.wg)(),(0,l.j4)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{cols:"12"},{default:(0,l.w5)((()=>[(0,l._)("div",a,[(0,l._)("h4",s,(0,n.zw)(i.title),1),(0,l._)("div",o,[(0,l.Wm)(u,{items:i.items,class:"m-0"},null,8,["items"])])])])),_:1})])),_:1})}var r={props:{title:{type:String,default:""},items:{type:Array,default:()=>[]}}},c=i(3744);const u=(0,c.Z)(r,[["render",d]]);var h=u},1990:function(e,t,i){i.r(t),i.d(t,{default:function(){return V}});var l=i(6252),n=i(9963),a=i(3577);const s={class:"app-calendar"},o={class:"mb-3"},d=(0,l._)("label",{for:"name",class:"form-label"},"NOMBRE DE EVENTO",-1),r={key:0,class:"invalid-feedback"},c={class:"text-end pt-5 mt-3"},u={class:"mb-3"},h=(0,l._)("label",{for:"name",class:"form-label"},"Event Name",-1),v={class:"d-flex justify-content-between"},m={class:"d-flex"};function p(e,t,i,p,f,b){const w=(0,l.up)("PageHeader"),y=(0,l.up)("FullCalendar"),g=(0,l.up)("BCardBody"),_=(0,l.up)("BCard"),C=(0,l.up)("BCol"),M=(0,l.up)("BRow"),E=(0,l.up)("BButton"),k=(0,l.up)("BForm"),W=(0,l.up)("BModal"),D=(0,l.up)("b-button"),B=(0,l.up)("Layout");return(0,l.wg)(),(0,l.j4)(B,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{title:f.title,items:f.items},null,8,["title","items"]),(0,l.Wm)(M,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{"np-body":""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l._)("div",s,[(0,l.Wm)(y,{ref:"fullCalendar",options:f.calendarOptions},null,8,["options"])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(W,{modelValue:f.showModal,"onUpdate:modelValue":t[1]||(t[1]=e=>f.showModal=e),title:"NUEVO CUMPLEAÃ‘OS","title-class":"font-18","body-class":"p-3","hide-footer":""},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{onSubmit:(0,n.iM)(b.handleSubmit,["prevent"])},{default:(0,l.w5)((()=>[(0,l.Wm)(M,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,{cols:"12"},{default:(0,l.w5)((()=>[(0,l._)("div",o,[d,(0,l.wy)((0,l._)("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>f.event.title=e),type:"text",class:(0,a.C_)(["form-control",{"is-invalid":f.submitted&&p.v$.event.title.$error}]),placeholder:"Ingresa nombre"},null,2),[[n.nr,f.event.title]]),f.submitted&&p.v$.event.title.required.$invalid?((0,l.wg)(),(0,l.iD)("div",r," This value is required. ")):(0,l.kq)("",!0)])])),_:1}),(0,l.Wm)(C,{cols:"12"})])),_:1}),(0,l._)("div",c,[(0,l.Wm)(E,{variant:"light",onClick:b.hideModal},{default:(0,l.w5)((()=>[(0,l.Uk)("Cerrar")])),_:1},8,["onClick"]),(0,l.Wm)(E,{type:"submit",variant:"success",class:"ms-1"},{default:(0,l.w5)((()=>[(0,l.Uk)("Crear Evento")])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["modelValue"]),(0,l.Wm)(W,{modelValue:f.eventModal,"onUpdate:modelValue":t[4]||(t[4]=e=>f.eventModal=e),title:"Edit Event","title-class":"font-18","hide-footer":"","body-class":"p-3"},{default:(0,l.w5)((()=>[(0,l._)("form",{onSubmit:t[3]||(t[3]=(0,n.iM)(((...e)=>b.editSubmit&&b.editSubmit(...e)),["prevent"]))},[(0,l.Wm)(M,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,{cols:"12"},{default:(0,l.w5)((()=>[(0,l._)("div",u,[h,(0,l.wy)((0,l._)("input",{id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>f.editevent.editTitle=e),type:"text",class:"form-control",placeholder:"Insert Event name"},null,512),[[n.nr,f.editevent.editTitle]])])])),_:1}),(0,l.Wm)(C,{cols:"12"})])),_:1}),(0,l._)("div",v,[(0,l.Wm)(E,{class:"ms-1",variant:"danger",onClick:b.confirm},{default:(0,l.w5)((()=>[(0,l.Uk)("Delete")])),_:1},8,["onClick"]),(0,l._)("div",m,[(0,l.Wm)(E,{variant:"light",onClick:b.closeModal},{default:(0,l.w5)((()=>[(0,l.Uk)("Close")])),_:1},8,["onClick"]),(0,l.Wm)(D,{class:"ms-1",variant:"success",onClick:b.editSubmit},{default:(0,l.w5)((()=>[(0,l.Uk)("Save")])),_:1},8,["onClick"])])])],32)])),_:1},8,["modelValue"])])),_:1})}var f=i(4813),b=i(6993),w=i(1029),y=i(9897),g=i(325),_=i(7292),C=i(5705),M=i(760),E=i(6455),k=i.n(E),W=i(4642),D=i(1022),B=i(6286),$=i(2298),S=i(4102),U={components:{FullCalendar:f.Z,Layout:W.Z,PageHeader:D.Z},setup(){return{v$:(0,C.Xw)()}},data(){return{title:"Calendar",items:[{text:"Minible"},{text:"Calendar",active:!0}],calendarEvents:[],calendarOptions:{locale:S.Z,eventDrop:this.handleEventDrop,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,listWeek"},plugins:[b.Z,w.Z,y.ZP,g.Z,_.Z],initialView:"dayGridMonth",themeSystem:"bootstrap",initialEvents:[],editable:!0,droppable:!0,eventResizableFromStart:!0,dateClick:this.dateClicked,eventClick:this.editEvent,eventsSet:this.handleEvents,weekends:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0},currentEvents:[],tableData:[],showModal:!1,eventModal:!1,categories:B.b,submitted:!1,submit:!1,newEventData:{},edit:{},deleteId:{},event:{title:"",category:""},editevent:{editTitle:"",editcategory:""}}},validations:{event:{title:{required:M.C1},category:{required:M.C1}}},mounted(){this.getData()},methods:{async getData(){try{const e=await this.$http.get(this.$apiURL+"birthday/all");this.calendarOptions.events=e.data.data,this.event.category="Danger",console.log(this.calendarOptions.events)}catch(e){console.error(e)}},handleSubmit(){if(this.submitted=!0,this.v$.$touch(),this.v$.$invalid)return;const e=(0,$.Z)(new Date(this.newEventData.date),"yyyy-MM-dd"),t={title:this.event.title,start:e,end:e,user_id:1};this.$http.post(this.$apiURL+"birthday/store",t).then((e=>{console.log(e),this.successmsg(),this.showModal=!1,this.getData()})).catch((e=>{console.error(e)})),this.submitted=!1,this.event={}},handleEventDrop(e){console.log(e);const t=(0,$.Z)(new Date(e.event.start),"yyyy-MM-dd"),i=e.event.end?(0,$.Z)(new Date(e.event.end),"yyyy-MM-dd"):t,l={title:e.event.title,start:t,end:i,id:parseInt(e.event.id)};this.updateEvent(e.event.id,l)},updateEvent(e,t){console.log(e,t),this.$http.post(this.$apiURL+"birthday/store",t).then((e=>{console.log(e),this.successmsg(),this.showModal=!1,this.getData()})).catch((e=>{console.error(e)}))},hideModal(){this.submitted=!1,this.showModal=!1,this.event={}},editSubmit(){console.log(this.editevent);const e={title:this.editevent.editTitle,id:parseInt(this.edit.id)};this.updateEvent(this.edit.id,e),this.closeModal()},deleteEvent(){const e=this.edit._def.publicId;this.$http.delete(this.$apiURL+"birthday/delete/"+e).then((e=>{console.log(e),this.edit.remove(),this.eventModal=!1})).catch((e=>{console.error(e)}))},dateClicked(e){this.newEventData=e,this.showModal=!0},editEvent(e){this.edit=e.event,this.editevent.editTitle=this.edit.title,this.editevent.editcategory=this.edit.classNames[0],this.eventModal=!0},closeModal(){this.eventModal=!1},confirm(){k().fire({title:"Are you sure?",text:"You won't be able to delete this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then((e=>{e.value&&(this.deleteEvent(),k().fire("Deleted!","Event has been deleted.","success"))}))},handleEvents(e){this.currentEvents=e},successmsg(){k().fire({position:"center",icon:"success",title:"Event has been saved",showConfirmButton:!1,timer:1e3})}}},Z=i(3744);const x=(0,Z.Z)(U,[["render",p]]);var V=x}}]);
//# sourceMappingURL=202.dff331c1.js.map