"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[570],{6962:function(e,t,l){l.r(t),l.d(t,{default:function(){return G}});var a=l(6252),i=l(9963),n=l(3577);const s=(0,a._)("div",{class:"button-items d-flex flex-wrap gap-2"},[(0,a._)("a",{class:"btn btn-primary",href:"https://back.sistemastest.xyz/importdiary",role:"button",target:"_blank"},"Importar Agendas"),(0,a._)("a",{class:"btn btn-primary",href:"https://back.sistemastest.xyz/importaudit",role:"button",target:"_blank"},"Importar Auditorias"),(0,a._)("a",{class:"btn btn-primary",href:"https://back.sistemastest.xyz/importevidence",role:"button",target:"_blank"},"Importar Evidencias")],-1),o={class:"app-calendar"},d={class:"app-calendar"},r={class:"mb-3"},c=(0,a._)("label",{for:"name",class:"form-label"},"Event Name",-1),u={class:"mb-3"},m=(0,a._)("label",{class:"control-label form-label"},"Category",-1),p=["value"],h={class:"mb-3"},v=(0,a._)("label",{for:"name",class:"form-label"},"Event Name",-1),b={class:"mb-3"},f=(0,a._)("label",{class:"control-label form-label"},"Category",-1),g=["value"],w={class:"mb-3"},y=(0,a._)("label",{for:"description",class:"form-label"},"Descripción",-1),_={class:"mb-3"},M=(0,a._)("label",{for:"numberOfPeople",class:"form-label"},"Número de Personas",-1);function D(e,t,l,D,W,E){const C=(0,a.up)("BCardBody"),k=(0,a.up)("BCard"),x=(0,a.up)("BCol"),T=(0,a.up)("BCardTitle"),U=(0,a.up)("BCardText"),Z=(0,a.up)("BCarouselSlide"),$=(0,a.up)("BCarousel"),B=(0,a.up)("BRow"),S=(0,a.up)("FullCalendar"),V=(0,a.up)("BModal"),L=(0,a.up)("Layout");return(0,a.wg)(),(0,a.j4)(L,null,{default:(0,a.w5)((()=>[(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Wm)(x,{lg:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{"no-body":""},{default:(0,a.w5)((()=>[(0,a.Wm)(C,null,{default:(0,a.w5)((()=>[s])),_:1})])),_:1})])),_:1}),(0,a.Wm)(x,{lg:"8"},{default:(0,a.w5)((()=>[(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(W.tableData,(e=>((0,a.wg)(),(0,a.j4)(x,{cols:"12",key:e.id},{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T,{innerHTML:e.title},null,8,["innerHTML"]),(0,a.Wm)(U,{innerHTML:e.description},null,8,["innerHTML"]),(0,a.Wm)($,{interval:3e3,style:{"text-shadow":"0px 0px 2px #000",width:"75%",margin:"0 auto"},controls:"",id:"carousel"+e.id},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.images,(e=>((0,a.wg)(),(0,a.j4)(Z,{key:e.id,"img-src":E.getFullImageUrl(e.url)},null,8,["img-src"])))),128))])),_:2},1032,["id"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,a.Wm)(x,{lg:"4"},{default:(0,a.w5)((()=>[(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Wm)(x,{cols:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{"np-body":""},{default:(0,a.w5)((()=>[(0,a.Uk)(" Reservas "),(0,a.Wm)(C,null,{default:(0,a.w5)((()=>[(0,a._)("div",o,[(0,a.Wm)(S,{ref:"fullCalendar",options:W.calendarOptions2},null,8,["options"])])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(x,{cols:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{"np-body":""},{default:(0,a.w5)((()=>[(0,a.Uk)(" Cumpleaños "),(0,a.Wm)(C,null,{default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a.Wm)(S,{ref:"fullCalendar",options:W.calendarOptions},null,8,["options"])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(V,{modelValue:W.eventModal,"onUpdate:modelValue":t[3]||(t[3]=e=>W.eventModal=e),title:"Cumpleaño","title-class":"font-18","hide-footer":"","body-class":"p-3"},{default:(0,a.w5)((()=>[(0,a._)("form",{onSubmit:t[2]||(t[2]=(0,i.iM)(((...e)=>E.editSubmit&&E.editSubmit(...e)),["prevent"]))},[(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Wm)(x,{lg:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",r,[c,(0,a.wy)((0,a._)("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>W.editevent.editTitle=e),type:"text",class:"form-control",placeholder:"Insert Event name",disabled:""},null,512),[[i.nr,W.editevent.editTitle]])])])),_:1}),(0,a.Wm)(x,{lg:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",u,[m,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>W.editevent.editcategory=e),class:"form-control",name:"category",disabled:""},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(W.categories,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.backgroundColor,value:`${e.value}`},(0,n.zw)(e.name),9,p)))),128))],512),[[i.bM,W.editevent.editcategory]])])])),_:1})])),_:1})],32)])),_:1},8,["modelValue"]),(0,a.Wm)(V,{modelValue:W.eventModal2,"onUpdate:modelValue":t[8]||(t[8]=e=>W.eventModal2=e),title:"Detail Event","title-class":"font-18","hide-footer":"","body-class":"p-3"},{default:(0,a.w5)((()=>[(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Wm)(x,{lg:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",h,[v,(0,a.wy)((0,a._)("input",{id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>W.editevent2.editTitle=e),type:"text",class:"form-control",disabled:"",placeholder:"Insert Event name"},null,512),[[i.nr,W.editevent2.editTitle]])])])),_:1}),(0,a.Wm)(x,{lg:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",b,[f,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>W.editevent2.editcategory=e),class:"form-control",name:"category"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(W.categories,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.backgroundColor,value:`${e.value}`},(0,n.zw)(e.name),9,g)))),128))],512),[[i.bM,W.editevent2.editcategory]])])])),_:1}),(0,a.Wm)(x,{lg:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",w,[y,(0,a.wy)((0,a._)("textarea",{id:"description","onUpdate:modelValue":t[6]||(t[6]=e=>W.editevent2.editDescription=e),class:"form-control",placeholder:"Descripción del evento"},null,512),[[i.nr,W.editevent2.editDescription]])])])),_:1}),(0,a.Wm)(x,{lg:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",_,[M,(0,a.wy)((0,a._)("input",{id:"numberOfPeople","onUpdate:modelValue":t[7]||(t[7]=e=>W.editevent2.editNumber_of_people=e),type:"number",class:"form-control",placeholder:"Número de personas"},null,512),[[i.nr,W.editevent2.editNumber_of_people]])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}l(560);var W=l(4813),E=l(6993),C=l(1029),k=l(9897),x=l(325),T=l(7292),U=l(5705),Z=l(760),$=l(6455),B=l.n($),S=l(4642),V=l(6286),L=l(2298),N=l(4102),R={components:{FullCalendar:W.Z,Layout:S.Z},setup(){return{v$:(0,U.Xw)()}},data(){return{title:"Calendar",items:[{text:"Minible"},{text:"Calendar",active:!0}],calendarEvents:[],calendarOptions:{locale:N.Z,eventDrop:this.handleEventDrop,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,listWeek"},plugins:[E.Z,C.Z,k.ZP,x.Z,T.Z],initialView:"dayGridMonth",themeSystem:"bootstrap",initialEvents:[],editable:!0,droppable:!0,eventResizableFromStart:!0,eventClick:this.editEvent,eventsSet:this.handleEvents,weekends:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,views:{timeGridWeek:{buttonText:"Semana",allDaySlot:!0,slotDuration:"24:00:00"}}},calendarOptions2:{locale:N.Z,eventDrop:this.handleEventDrop,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},plugins:[E.Z,C.Z,k.ZP,x.Z,T.Z],initialView:"dayGridMonth",themeSystem:"bootstrap",initialEvents:[],editable:!0,droppable:!0,eventResizableFromStart:!0,eventClick:this.editEvent2,eventsSet:this.handleEvents,weekends:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0},currentEvents:[],tableData:[],showModal:!1,eventModal:!1,eventModal2:!1,categories:V.b,submitted:!1,submit:!1,newEventData:{},edit:{},deleteId:{},event:{title:"",category:""},editevent:{editTitle:"",editcategory:""},editevent2:{editTitle:"",editCategory:"",editNumber_of_people:null,editDescription:""}}},validations:{event:{title:{required:Z.C1},category:{required:Z.C1}}},mounted(){this.getData(),this.getData2(),this.getDataNews()},methods:{async getDataNews(){try{const e=await this.$http.get(this.$apiURL+"news/principal");e.data.data.map((e=>this.tableData.push({...e}))),this.totalRows=this.tableData.length}catch(e){console.error(e)}},getFullImageUrl(e){return console.log(e),this.$storageURL+"/"+e},async getData(){try{const e=await this.$http.get(this.$apiURL+"birthday/all");this.calendarOptions.events=e.data.data,console.log(this.calendarOptions.events)}catch(e){console.error(e)}},async getData2(){try{const e=await this.$http.get(this.$apiURL+"reservation/all");this.calendarOptions2.events=e.data.data,console.log(this.calendarOptions2.events)}catch(e){console.error(e)}},handleSubmit(){if(this.submitted=!0,this.v$.$touch(),this.v$.$invalid)return;const e=(0,L.Z)(new Date(this.newEventData.date),"yyyy-MM-dd"),t={title:this.event.title,start:e,end:e,user_id:1};this.$http.post(this.$apiURL+"birthday/store",t).then((e=>{console.log(e),this.successmsg(),this.showModal=!1,this.getData()})).catch((e=>{console.error(e)})),this.submitted=!1,this.event={}},handleEventDrop(e){console.log(e);const t=(0,L.Z)(new Date(e.event.start),"yyyy-MM-dd"),l=e.event.end?(0,L.Z)(new Date(e.event.end),"yyyy-MM-dd"):t,a={title:e.event.title,start:t,end:l,id:parseInt(e.event.id)};this.updateEvent(e.event.id,a)},updateEvent(e,t){console.log(e,t),this.$http.post(this.$apiURL+"birthday/store",t).then((e=>{console.log(e),this.successmsg(),this.showModal=!1,this.getData()})).catch((e=>{console.error(e)}))},hideModal(){this.submitted=!1,this.showModal=!1,this.event={}},editSubmit(){console.log(this.editevent);const e={title:this.editevent.editTitle,id:parseInt(this.edit.id)};this.updateEvent(this.edit.id,e),this.closeModal()},deleteEvent(){this.edit.remove(),this.eventModal=!1},editEvent(e){this.edit=e.event,this.editevent.editTitle=this.edit.title,this.editevent.editcategory=this.edit.classNames[0],this.eventModal=!0},editEvent2(e){console.log(e),this.edit=e.event,this.editevent2.editTitle=this.edit.title,this.editevent2.editDescription=this.edit.extendedProps.description,this.editevent2.editNumber_of_people=this.edit.extendedProps.number_of_people,this.editevent2.editcategory=this.edit.classNames[0],this.eventModal2=!0},closeModal(){this.eventModal=!1,this.eventModal2=!1},confirm(){B().fire({title:"Are you sure?",text:"You won't be able to delete this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then((e=>{e.value&&(this.deleteEvent(),B().fire("Deleted!","Event has been deleted.","success"))}))},handleEvents(e){this.currentEvents=e},successmsg(){B().fire({position:"center",icon:"success",title:"Event has been saved",showConfirmButton:!1,timer:1e3})}}},I=l(3744);const O=(0,I.Z)(R,[["render",D]]);var G=O}}]);
//# sourceMappingURL=570.c6521a5f.js.map