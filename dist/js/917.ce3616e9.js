"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[917],{1745:function(e,t,l){l.r(t),l.d(t,{default:function(){return M}});var o=l(6252);const a=(0,o._)("i",{class:"bx bx-check-circle"},null,-1),i={id:"tickets-table_length",class:"dataTables_length"},r={class:"d-inline-flex align-items-center"},s={class:"col-sm-12 col-md-6"},n={id:"tickets-table_filter",class:"dataTables_filter text-md-end"},m={class:"d-inline-flex align-items-center"},d={class:"table-responsive mb-0"},u={class:"dataTables_paginate paging_simple_numbers float-end"},c={class:"pagination pagination-rounded mb-0"};function f(e,t,l,f,p,_){const b=(0,o.up)("PageHeader"),w=(0,o.up)("BCol"),h=(0,o.up)("BRow"),g=(0,o.up)("BCardHeader"),W=(0,o.up)("BFormSelect"),v=(0,o.up)("BFormInput"),V=(0,o.up)("BButton"),y=(0,o.up)("BTable"),k=(0,o.up)("BPagination"),q=(0,o.up)("BCardBody"),B=(0,o.up)("BCard"),U=(0,o.up)("LiquidacionModal"),C=(0,o.up)("Layout");return(0,o.wg)(),(0,o.j4)(C,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{title:p.title,items:p.items},null,8,["title","items"]),(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{"no-body":""},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,{sm:"7"},{default:(0,o.w5)((()=>[a,(0,o.Uk)("   Listado de ordenes ")])),_:1}),(0,o.Wm)(w,{sm:"5"})])),_:1})])),_:1}),(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"mt-4"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{sm:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o._)("label",r,[(0,o.Uk)(" Show  "),(0,o.Wm)(W,{modelValue:p.perPage,"onUpdate:modelValue":t[0]||(t[0]=e=>p.perPage=e),size:"sm",options:p.pageOptions},null,8,["modelValue","options"]),(0,o.Uk)(" entries ")])])])),_:1}),(0,o._)("div",s,[(0,o._)("div",n,[(0,o._)("label",m,[(0,o.Uk)(" Search: "),(0,o.Wm)(v,{modelValue:p.filter,"onUpdate:modelValue":t[1]||(t[1]=e=>p.filter=e),type:"search",placeholder:"Search...",class:"form-control form-control-sm ms-2"},null,8,["modelValue"])])])])])),_:1}),(0,o._)("div",d,[(0,o.Wm)(y,{items:p.tableData,fields:p.fields,responsive:"sm","per-page":p.perPage,"current-page":p.currentPage,"sort-by":p.sortBy,"sort-desc":p.sortDesc,filter:p.filter,"filter-included-fields":p.filterOn,onFiltered:_.onFiltered},{"cell(actions)":(0,o.w5)((({item:e})=>[(0,o.Wm)(V,{onClick:t=>_.editItem(e),variant:"info"},{default:(0,o.w5)((()=>[(0,o.Uk)("Editar")])),_:2},1032,["onClick"])])),_:1},8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])]),(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o._)("ul",c,[(0,o.Wm)(k,{modelValue:p.currentPage,"onUpdate:modelValue":t[2]||(t[2]=e=>p.currentPage=e),"total-rows":p.totalRows,"per-page":p.perPage},null,8,["modelValue","total-rows","per-page"])])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(U,{ref:"LiquidacionModal"},null,512)])),_:1})}l(560);var p=l(4642),_=l(1022),b=l(9963);const w={class:"mt-4"},h={class:"mt-4"},g={class:"mt-4"},W={class:"mt-4"},v={class:"mt-4"},V={class:"mt-4"},y={class:"mt-4"},k={class:"mt-4"},q={class:"mt-4"},B={class:"mt-4"},U={class:"mt-4"},C={class:"mt-4"};function x(e,t,l,a,i,r){const s=(0,o.up)("BCardTitle"),n=(0,o.up)("BFormInput"),m=(0,o.up)("BFormGroup"),d=(0,o.up)("BCol"),u=(0,o.up)("Multiselect"),c=(0,o.up)("BRow"),f=(0,o.up)("BButton"),p=(0,o.up)("BCardBody"),_=(0,o.up)("BCard"),x=(0,o.up)("BModal");return(0,o.wg)(),(0,o.j4)(x,{modelValue:i.isOpen,"onUpdate:modelValue":t[13]||(t[13]=e=>i.isOpen=e),size:"xl","hide-footer":""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{"no-body":""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Editar Orden")])),_:1}),(0,o._)("form",{autocomplete:"off",class:"row no-gutters",onSubmit:t[12]||(t[12]=(0,b.iM)(((...e)=>r.submit&&r.submit(...e)),["prevent"]))},[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{lg:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",w,[(0,o.Wm)(m,{label:"Codigo de requerimiento","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{type:"text",modelValue:i.form.codigo_requerimiento,"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.codigo_requerimiento=e),placeholder:"CÒDIGO SIN ESPACIOS",required:"",id:"formrow-firstname-input"},null,8,["modelValue"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",h,[(0,o.Wm)(m,{label:"Tipo de requerimiento","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form.tipo_requerimiento,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.tipo_requerimiento=e),options:i.requerimientos,required:"",class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",g,[(0,o.Wm)(m,{label:"Tipo de cierre","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form.tipo_cierre,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.tipo_cierre=e),required:"",options:i.cierres,class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",W,[(0,o.Wm)(m,{label:"CF Técnico","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:i.form.cf,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.cf=e),required:"",type:"text",onInput:t[4]||(t[4]=e=>r.getTecnicos()),id:"formrow-firstname-input"},null,8,["modelValue"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",v,[(0,o.Wm)(m,{label:"Técnico","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:i.form.tecnico,"onUpdate:modelValue":t[5]||(t[5]=e=>i.form.tecnico=e),required:"",type:"text",id:"formrow-firstname-input",disabled:""},null,8,["modelValue"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",V,[(0,o.Wm)(m,{label:"Zonal","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{type:"text",required:"",modelValue:i.form.zonal,"onUpdate:modelValue":t[6]||(t[6]=e=>i.form.zonal=e),id:"formrow-firstname-input",disabled:""},null,8,["modelValue"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",y,[(0,o.Wm)(m,{label:"Número de referencia","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:i.form.numero_referencia,"onUpdate:modelValue":t[7]||(t[7]=e=>i.form.numero_referencia=e),required:"",type:"text",id:"formrow-firstname-input"},null,8,["modelValue"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",k,[(0,o.Wm)(m,{label:"Efectividad","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form.efectividad,"onUpdate:modelValue":t[8]||(t[8]=e=>i.form.efectividad=e),options:i.efectividades,required:"",class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",q,[(0,o.Wm)(m,{label:"Nota NPS","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form.nota_nps,"onUpdate:modelValue":t[9]||(t[9]=e=>i.form.nota_nps=e),required:"",options:i.notas,class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",B,[(0,o.Wm)(m,{label:"Posible detractor","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form.detractor,"onUpdate:modelValue":t[10]||(t[10]=e=>i.form.detractor=e),required:"",options:i.posibles,class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])])),_:1}),(0,o.Wm)(d,{lg:"12"},{default:(0,o.w5)((()=>[(0,o._)("div",U,[(0,o.Wm)(m,{label:"Tipo de cierre","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("textarea",{id:"message","onUpdate:modelValue":t[11]||(t[11]=e=>i.form.observaciones=e),class:"form-control"},null,512),[[b.nr,i.form.observaciones]])])),_:1})])])),_:1})])),_:1}),(0,o._)("div",C,[(0,o.Wm)(f,{type:"submit",variant:"primary",onSubmit:(0,b.iM)(r.submit,["prevent"])},{default:(0,o.w5)((()=>[(0,o.Uk)("Actualizar")])),_:1},8,["onSubmit"])])],32)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}var P=l(381),I=l.n(P),O=l(7091),S={components:{Multiselect:O.Z},data(){return{isOpen:!1,selectedItem:null,value:null,requerimientos:["Alta","Averia"],cierres:["Completado","Suspendido","Devuelto","Pendiente"],efectividades:["Efectiva","Inefectiva","Inefectiva recuperada"],notas:["Detractor (0-5)","Neutro (6-7)","Promotor (8-9)","No aplica"],posibles:["Si","No","No aplica"],form:{}}},mounted(){this.initForm()},methods:{initForm(){this.form={zonal:null,tecnico:null,cf:"",codigo_requerimiento:null,tipo_requerimiento:null,tipo_cierre:null,numero_referencia:null,efectividad:null,nota_nps:null,detractor:null,observaciones:null,contrata:"",usuario:"admin",fecha:I()().format("YYYY-MM-DD"),id:null}},open(e){this.isOpen=!0,this.form=e},saveChanges(){this.$emit("edit-complete",this.selectedItem),this.close()},close(){this.isOpen=!1,this.selectedItem=null},async getTecnicos(){try{this.$nextTick((async()=>{if(console.log(this.form.cf),""==this.form.cf)this.form.tecnico=null,this.form.zonal=null,this.form.contrata=null;else{const e=await this.$http.get(this.$apiURL+"technical/carnet/"+this.form.cf);null!=e.data&&e.data.data?(this.form.tecnico=e.data.data.Nombre_Completo||null,this.form.zonal=e.data.data.Zonal||null,this.form.contrata=e.data.data.Contrata||null):(this.form.tecnico=null,this.form.zonal=null,this.form.contrata=null)}}))}catch(e){console.error(e)}},async submit(){this.$http.put(this.$apiURL+"order/update/"+this.form.id,this.form,{}).then((e=>{200==e.status&&(console.log(e),this.$swal({title:"Completado!",text:e.data.message,icon:"success",confirmButtonColor:"#6457A2"}),this.$swal("Completado!",e.data.message,"success"),this.initForm())})).catch((e=>{console.error(e),this.$swal({icon:"error",title:"Oops...",text:e})}))}}},D=l(3744);const L=(0,D.Z)(S,[["render",x]]);var T=L,F={components:{Layout:p.Z,PageHeader:_.Z,LiquidacionModal:T},data(){return{tableData:[],title:"Liquidaciones",items:[{text:"Liquidaciones",href:"/liquidacion/index"},{text:"Listado",active:!0}],totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:null,filterOn:[],sortBy:"age",sortDesc:!1,fields:[{key:"codigo_requerimiento",sortable:!0},{key:"tipo_requerimiento",sortable:!0},{key:"tipo_cierre",sortable:!0},{key:"tecnico",sortable:!0},{key:"zonal",sortable:!0},{key:"contrata",sortable:!0},{key:"fecha",sortable:!0},{key:"efectividad",sortable:!0},{key:"nota_nps",sortable:!0},{key:"detractor",sortable:!0},{key:"actions"}]}},mounted(){this.totalRows=this.items.length,this.getData()},methods:{onFiltered(e){this.totalRows=e.length,this.currentPage=1},async getData(){try{const e=await this.$http.get(this.$apiURL+"order/all");e.data.data.map((e=>this.tableData.push({...e}))),this.totalRows=this.tableData.length}catch(e){console.error(e)}},editItem(e){console.log("Editar item",e),this.selectedItem=JSON.parse(JSON.stringify(e)),this.$refs.LiquidacionModal.open(this.selectedItem)}}};const $=(0,D.Z)(F,[["render",f]]);var M=$}}]);
//# sourceMappingURL=917.ce3616e9.js.map