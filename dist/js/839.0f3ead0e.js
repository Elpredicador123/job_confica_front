"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[839],{3912:function(e,l,t){t.r(l),t.d(l,{default:function(){return le}});var a=t(6252);const i={id:"tickets-table_length",class:"dataTables_length"},s={class:"d-inline-flex align-items-center"},o={class:"col-sm-12 col-md-6"},r={id:"tickets-table_filter",class:"dataTables_filter text-md-end"},n={class:"d-inline-flex align-items-center"},d={class:"table-responsive mb-0"},u=["innerHTML"],c={class:"dataTables_paginate paging_simple_numbers float-end"},m={class:"pagination pagination-rounded mb-0"};function p(e,l,t,p,f,g){const h=(0,a.up)("PageHeader"),w=(0,a.up)("BCardTitle"),_=(0,a.up)("BFormSelect"),b=(0,a.up)("BCol"),y=(0,a.up)("BFormInput"),v=(0,a.up)("BRow"),D=(0,a.up)("BButton"),k=(0,a.up)("BTable"),W=(0,a.up)("BPagination"),F=(0,a.up)("BCardBody"),x=(0,a.up)("BCard"),B=(0,a.up)("NewsModal"),U=(0,a.up)("Layout");return(0,a.wg)(),(0,a.j4)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,{title:f.title,items:f.items},null,8,["title","items"]),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,{cols:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{"no-body":""},{default:(0,a.w5)((()=>[(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Data Table")])),_:1}),(0,a.Wm)(v,{class:"mt-4"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{sm:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a._)("label",s,[(0,a.Uk)(" Show  "),(0,a.Wm)(_,{modelValue:f.perPage,"onUpdate:modelValue":l[0]||(l[0]=e=>f.perPage=e),size:"sm",options:f.pageOptions},null,8,["modelValue","options"]),(0,a.Uk)(" entries ")])])])),_:1}),(0,a._)("div",o,[(0,a._)("div",r,[(0,a._)("label",n,[(0,a.Uk)(" Search: "),(0,a.Wm)(y,{modelValue:f.filter,"onUpdate:modelValue":l[1]||(l[1]=e=>f.filter=e),type:"search",placeholder:"Search...",class:"form-control form-control-sm ms-2"},null,8,["modelValue"])])])])])),_:1}),(0,a._)("div",d,[(0,a.Wm)(k,{items:f.tableData,fields:f.fields,responsive:"sm","per-page":f.perPage,"current-page":f.currentPage,"sort-by":f.sortBy,"sort-desc":f.sortDesc,filter:f.filter,"filter-included-fields":f.filterOn,onFiltered:g.onFiltered},{"cell(actions)":(0,a.w5)((({item:e})=>[(0,a.Wm)(D,{onClick:l=>g.editItem(e),variant:"info"},{default:(0,a.w5)((()=>[(0,a.Uk)("Editar")])),_:2},1032,["onClick"])])),"cell(title)":(0,a.w5)((e=>[(0,a._)("div",{innerHTML:e.item.title},null,8,u)])),_:1},8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])]),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a._)("ul",m,[(0,a.Wm)(W,{modelValue:f.currentPage,"onUpdate:modelValue":l[2]||(l[2]=e=>f.currentPage=e),"total-rows":f.totalRows,"per-page":f.perPage},null,8,["modelValue","total-rows","per-page"])])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(B,{ref:"NewsModal"},null,512)])),_:1})}t(560);var f=t(4642),g=t(1022),h=t(9963),w=t(3577),_=t(2381);const b=(0,a._)("strong",null,[(0,a._)("h1",null,"Editar Noticias")],-1),y=(0,a._)("i",{class:"bx bx-check-circle"},null,-1),v=(0,a._)("i",{class:"bx bx-check-circle"},null,-1),D={class:"list-unstyled mb-0",id:"dropzone-preview2"},k={class:"mt-2",id:"dropzone-preview-list2"},W={class:"d-flex p-2"},F={class:"flex-shrink-0 me-3"},x={class:"avatar-sm bg-light rounded"},B=["src"],U={class:"flex-shrink-0 ms-3"},z=["onUpdate:modelValue","value"],C=(0,a._)("p",{class:"text-muted"},null,-1),V={class:"list-unstyled mb-0",id:"dropzone-preview2"},M={class:"mt-2",id:"dropzone-preview-list2"},O={class:"d-flex p-2"},P=(0,a._)("div",{class:"flex-shrink-0 me-3"},[(0,a._)("div",{class:"avatar-sm bg-light rounded"},[(0,a._)("img",{class:"img-fluid rounded d-block",src:_,alt:"Dropzone-Image"})])],-1),R={class:"flex-grow-1"},S={class:"pt-1"},I={class:"fs-md mb-1"},N={class:"fs-sm text-muted mb-0"},T=(0,a._)("strong",{class:"error text-danger"},null,-1),E={class:"flex-shrink-0 ms-3"};function H(e,l,t,i,s,o){const r=(0,a.up)("BCol"),n=(0,a.up)("BRow"),d=(0,a.up)("BCardHeader"),u=(0,a.up)("ckeditor"),c=(0,a.up)("BCardBody"),m=(0,a.up)("BCard"),p=(0,a.up)("BCardTitle"),f=(0,a.up)("DropZone"),g=(0,a.up)("BButton"),_=(0,a.up)("BModal");return(0,a.wg)(),(0,a.j4)(_,{modelValue:s.isOpen,"onUpdate:modelValue":l[6]||(l[6]=e=>s.isOpen=e),size:"xl","hide-footer":""},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{cols:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{"no-body":""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[b,(0,a._)("form",{class:"needs-validation",onSubmit:l[5]||(l[5]=(0,h.iM)(((...e)=>o.submit&&o.submit(...e)),["prevent"]))},[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{cols:"6"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{sm:"7"},{default:(0,a.w5)((()=>[y,(0,a.Uk)("   Titulo ")])),_:1})])),_:1})])),_:1}),(0,a.Wm)(m,{"no-body":""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:s.news.title,"onUpdate:modelValue":l[0]||(l[0]=e=>s.news.title=e),editor:s.editor_title},null,8,["modelValue","editor"])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(r,{cols:"6"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{"no-body":""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{sm:"7"},{default:(0,a.w5)((()=>[v,(0,a.Uk)("   Descripción ")])),_:1})])),_:1})])),_:1}),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:s.news.description,"onUpdate:modelValue":l[1]||(l[1]=e=>s.news.description=e),editor:s.editor_description},null,8,["modelValue","editor"])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(r,{lg:"4"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Seleccionar para eliminar "),(0,a._)("ul",D,[(0,a._)("li",k,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.galleryFilesEdit,((l,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"border rounded mb-1",key:t},[(0,a._)("div",W,[(0,a._)("div",F,[(0,a._)("div",x,[(0,a._)("img",{class:"img-fluid rounded d-block",src:e.storage+l.url,alt:"Dropzone-Image"},null,8,B)])]),(0,a._)("div",U,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":e=>l.estado=e,value:t},null,8,z),[[h.e8,l.estado]])])])])))),128))])])])),_:1}),(0,a.Wm)(r,{lg:"8"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{"no-body":""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"mb-1"},{default:(0,a.w5)((()=>[(0,a.Uk)("Cargar Archivo")])),_:1}),C,(0,a._)("div",null,[(0,a.Wm)(f,{files:"files",cloudIcon:"remix",dropzoneFile:"galleryDropzoneFile",isMultiple:!0,onDrop:l[2]||(l[2]=(0,h.iM)((e=>o.galleryDrop(e)),["prevent"])),onChange:o.gallerySelectedFile,onDragenter:l[3]||(l[3]=(0,h.iM)((()=>{}),["prevent"])),onDragover:l[4]||(l[4]=(0,h.iM)((()=>{}),["prevent"]))},null,8,["onChange"])]),(0,a._)("ul",V,[(0,a._)("li",M,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.galleryFiles,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"border rounded mb-1",key:l},[(0,a._)("div",O,[P,(0,a._)("div",R,[(0,a._)("div",S,[(0,a._)("h5",I,"   "+(0,w.zw)(e.name),1),(0,a._)("p",N,[(0,a._)("strong",null,(0,w.zw)(e.size/1024),1),(0,a.Uk)(" KB ")]),T])]),(0,a._)("div",E,[(0,a.Wm)(g,{size:"sm",variant:"danger",onClick:()=>o.deleteRecord(e)},{default:(0,a.w5)((()=>[(0,a.Uk)("Delete")])),_:2},1032,["onClick"])])])])))),128))])])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,{type:"submit",variant:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("Submit")])),_:1})])),_:1})])),_:1})],32)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}var L=t(4e3),$=t.n(L),Z=t(5234),Y=t.n(Z),A=t(3081),j=t(381),J=t.n(j),K={components:{ckeditor:$().component,DropZone:A.Z},data(){return{title:"NUEVA INFOGRAFÍA",isOpen:!1,items:[{text:"Infografías",href:"/infografias/create"},{text:"Nueva Inforgrafía",active:!0}],news:{},dPDefaultDate:null,galleryDropzoneFile:"",galleryFiles:[],DropFile:[],galleryFilesEdit:[],editor_title:Y(),editor_description:Y()}},methods:{open(e){const l=JSON.parse(localStorage.getItem("user"));console.log(e),this.storage=this.$storageURL+"/",this.isOpen=!0,this.news.title=e.title,this.news.description=e.description,this.news.date=J()().format("YYYY-MM-DD HH:mm:ss"),this.news.id=e.id,this.news.user_id=l.id,this.galleryFilesEdit=e.images.map((e=>({...e,estado:!1}))),console.log(this.galleryFilesEdit)},close(){this.isOpen=!1,this.selectedItem=null},deleteRecord(e){console.log("call Delet"),e.id&&(this.galleryFiles=this.galleryFiles.filter((l=>l.id!=e.id)))},galleryDrop(e){e.preventDefault(),this.galleryDropzoneFile=e.dataTransfer.files,this.galleryFiles.push(this.galleryDropzoneFile)},gallerySelectedFile(){this.galleryDropzoneFile=document.querySelector(".galleryDropzoneFile").files,this.DropFile.push(this.galleryDropzoneFile);const e=Object.values(this.galleryDropzoneFile).map((e=>({name:e.name,lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,webkitRelativePath:e.webkitRelativePath,size:e.size})));this.galleryFiles.push(...e),this.galleryFiles=this.galleryFiles.map(((e,l)=>({id:l+1,...e})))},async submit(){let e=new FormData;if(Object.keys(this.news).forEach((l=>{e.append(l,this.news[l])})),console.log(this.DropFile),this.DropFile&&this.DropFile.length>0)for(let t=0;t<this.DropFile.length;t++)e.append("files[]",this.DropFile[t][0]);const l=this.galleryFilesEdit.filter((e=>!0===e.estado)).map((e=>e.id));l.forEach((l=>{e.append("images[]",l)})),console.log(e),this.$http.post(this.$apiURL+"news/store",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{200==e.status&&(console.log(e),this.$swal({title:"Completado!",text:e.data.message,icon:"success",confirmButtonColor:"#6457A2"}))})).catch((e=>{this.$swal({icon:"error",title:"Oops...",text:e})}))}}},q=t(3744);const G=(0,q.Z)(K,[["render",H]]);var Q=G,X={components:{Layout:f.Z,PageHeader:g.Z,NewsModal:Q},data(){return{tableData:[],title:"Noticias",items:[{text:"Noticias",href:"/news/index"},{text:"Listado",active:!0}],totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:null,filterOn:[],sortBy:"age",sortDesc:!1,fields:[{key:"id",sortable:!0},{key:"title",sortable:!0},{key:"description",sortable:!0},{key:"date",sortable:!0},{key:"user_id",sortable:!0},{key:"actions"}]}},mounted(){this.totalRows=this.items.length,this.getData()},methods:{onFiltered(e){this.totalRows=e.length,this.currentPage=1},async getData(){try{const e=await this.$http.get(this.$apiURL+"news/all");e.data.data.map((e=>this.tableData.push({...e}))),this.totalRows=this.tableData.length}catch(e){console.error(e)}},editItem(e){console.log("Editar item",e),this.selectedItem=JSON.parse(JSON.stringify(e)),this.$refs.NewsModal.open(this.selectedItem)}}};const ee=(0,q.Z)(X,[["render",p]]);var le=ee}}]);
//# sourceMappingURL=839.0f3ead0e.js.map