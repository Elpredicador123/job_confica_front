"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[659],{5513:function(e,t,a){a.r(t),a.d(t,{default:function(){return U}});var s=a(6252);const i={id:"tickets-table_length",class:"dataTables_length"},l={class:"d-inline-flex align-items-center"},o={class:"col-sm-12 col-md-6"},n={id:"tickets-table_filter",class:"dataTables_filter text-md-end"},r={class:"d-inline-flex align-items-center"},d={class:"table-responsive mb-0"},c={class:"dataTables_paginate paging_simple_numbers float-end"},p={class:"pagination pagination-rounded mb-0"},u={id:"tickets-table_length",class:"dataTables_length"},h={class:"d-inline-flex align-items-center"},m={class:"col-sm-12 col-md-6"},g={id:"tickets-table_filter",class:"dataTables_filter text-md-end"},f={class:"d-inline-flex align-items-center"},b={class:"table-responsive mb-0"},C={class:"dataTables_paginate paging_simple_numbers float-end"},T={class:"pagination pagination-rounded mb-0"};function w(e,t,a,w,S,_){const W=(0,s.up)("PageHeader"),y=(0,s.up)("BCardTitle"),v=(0,s.up)("BCol"),D=(0,s.up)("Multiselect"),I=(0,s.up)("BRow"),R=(0,s.up)("apexchart"),k=(0,s.up)("BCardBody"),U=(0,s.up)("BCard"),x=(0,s.up)("BFormSelect"),$=(0,s.up)("BFormInput"),V=(0,s.up)("BTable"),O=(0,s.up)("BPagination"),B=(0,s.up)("Layout");return(0,s.wg)(),(0,s.j4)(B,null,{default:(0,s.w5)((()=>[(0,s.Wm)(W,{title:S.title,items:e.items},null,8,["title","items"]),(0,s.Wm)(I,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,{lg:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y,{class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Uk)("Inefectiva Gestor")])),_:1}),(0,s.Wm)(I,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,{cols:"7"}),(0,s.Wm)(v,{cols:"5"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Filtrar por: "),(0,s.Wm)(D,{modelValue:S.CiudadId1,"onUpdate:modelValue":t[0]||(t[0]=e=>S.CiudadId1=e),options:S.Ciudades,placeholder:"Seleccionar Ciudad",ref:"multiselect1",onChange:t[1]||(t[1]=e=>_.getContrata())},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,s.Wm)(R,{class:"apex-charts",height:"350",type:"bar",dir:"ltr",series:S.ContrataBar.series,options:S.ContrataBar.chartOptions},null,8,["series","options"])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(v,{lg:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y,{class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Uk)("Distrubución Inefectiva")])),_:1}),(0,s.Wm)(R,{class:"apex-charts",height:"320",type:"pie",dir:"ltr",series:S.pieChart2.series,options:S.pieChart2.chartOptions},null,8,["series","options"])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(v,{lg:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y,{class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Uk)("Distribución Reitero")])),_:1}),(0,s.Wm)(R,{class:"apex-charts",height:"320",type:"pie",dir:"ltr",series:S.pieChart.series,options:S.pieChart.chartOptions},null,8,["series","options"])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(v,{cols:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Averías Reiteradas - Sup")])),_:1}),(0,s.Wm)(I,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,{cols:"7"}),(0,s.Wm)(v,{cols:"5"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Filtrar por: "),(0,s.Wm)(D,{modelValue:S.CiudadId3,"onUpdate:modelValue":t[2]||(t[2]=e=>S.CiudadId3=e),options:S.Ciudades,placeholder:"Seleccionar Ciudad",onChange:t[3]||(t[3]=e=>_.getTableSup())},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,s.Wm)(I,{class:"mt-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{sm:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s._)("label",l,[(0,s.Uk)(" Show  "),(0,s.Wm)(x,{modelValue:S.perPageSup,"onUpdate:modelValue":t[4]||(t[4]=e=>S.perPageSup=e),size:"sm",options:S.pageOptionsSup},null,8,["modelValue","options"]),(0,s.Uk)(" entries ")])])])),_:1}),(0,s._)("div",o,[(0,s._)("div",n,[(0,s._)("label",r,[(0,s.Uk)(" Search: "),(0,s.Wm)($,{modelValue:S.filterSup,"onUpdate:modelValue":t[5]||(t[5]=e=>S.filterSup=e),type:"search",placeholder:"Search...",class:"form-control form-control-sm ms-2"},null,8,["modelValue"])])])])])),_:1}),(0,s._)("div",d,[(0,s.Wm)(V,{items:S.tableDataSup,fields:S.fieldsSup,responsive:"sm","per-page":S.perPageSup,"current-page":S.currentPageSup,"sort-by":S.sortBySup,"sort-desc":S.sortDescSup,filter:S.filterSup,"filter-included-fields":S.filterOnSup,onFiltered:_.onFilteredSup},null,8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])]),(0,s.Wm)(I,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s._)("div",c,[(0,s._)("ul",p,[(0,s.Wm)(O,{modelValue:S.currentPageSup,"onUpdate:modelValue":t[6]||(t[6]=e=>S.currentPageSup=e),"total-rows":S.totalRowsSup,"per-page":S.perPageSup},null,8,["modelValue","total-rows","per-page"])])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(v,{cols:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Averías Reiteradas - Tec")])),_:1}),(0,s.Wm)(I,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,{cols:"7"}),(0,s.Wm)(v,{cols:"5"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Filtrar por: "),(0,s.Wm)(D,{modelValue:S.CiudadId4,"onUpdate:modelValue":t[7]||(t[7]=e=>S.CiudadId4=e),options:S.Ciudades,placeholder:"Seleccionar Ciudad",onChange:t[8]||(t[8]=e=>_.getTableTec())},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,s.Wm)(I,{class:"mt-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{sm:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",u,[(0,s._)("label",h,[(0,s.Uk)(" Show  "),(0,s.Wm)(x,{modelValue:S.perPageTec,"onUpdate:modelValue":t[9]||(t[9]=e=>S.perPageTec=e),size:"sm",options:S.pageOptionsTec},null,8,["modelValue","options"]),(0,s.Uk)(" entries ")])])])),_:1}),(0,s._)("div",m,[(0,s._)("div",g,[(0,s._)("label",f,[(0,s.Uk)(" Search: "),(0,s.Wm)($,{modelValue:S.filterTec,"onUpdate:modelValue":t[10]||(t[10]=e=>S.filterTec=e),type:"search",placeholder:"Search...",class:"form-control form-control-sm ms-2"},null,8,["modelValue"])])])])])),_:1}),(0,s._)("div",b,[(0,s.Wm)(V,{items:S.tableDataTec,fields:S.fieldsTec,responsive:"sm","per-page":S.perPageTec,"current-page":S.currentPageTec,"sort-by":S.sortByTec,"sort-desc":S.sortDescTec,filter:S.filterTec,"filter-included-fields":S.filterOnTec,onFiltered:_.onFilteredTec},null,8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])]),(0,s.Wm)(I,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s._)("div",C,[(0,s._)("ul",T,[(0,s.Wm)(O,{modelValue:S.currentPageTec,"onUpdate:modelValue":t[11]||(t[11]=e=>S.currentPageTec=e),"total-rows":S.totalRowsTec,"per-page":S.perPageTec},null,8,["modelValue","total-rows","per-page"])])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}a(560);var S=a(5172),_=a(1022),W=a(7091);const y={series:[{data:[]}],chartOptions:{chart:{toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!1},colors:["#34c38f"],grid:{borderColor:"#f1f1f1"},xaxis:{categories:[]}}},v={series:[],chartOptions:{labels:[],colors:["#34c38f","#556ee6","#f46a6a","#50a5f1","#f1b44c"],legend:{show:!0,position:"bottom",horizontalAlign:"center",verticalAlign:"middle",floating:!1,fontSize:"14px",offsetX:0,offsetY:10},responsive:[{breakpoint:600,options:{chart:{height:240},legend:{show:!1}}}]}},D={series:[],chartOptions:{labels:[],colors:["#34c38f","#556ee6","#f46a6a","#50a5f1","#f1b44c","#f3a44c","#55b44c","#H1b44c"],legend:{show:!0,position:"bottom",horizontalAlign:"center",verticalAlign:"middle",floating:!1,fontSize:"14px",offsetX:0,offsetY:10},responsive:[{breakpoint:600,options:{chart:{height:240},legend:{show:!1}}}]}};var I={components:{Layout:S.Z,Multiselect:W.Z,PageHeader:_.Z},data(){return{title:"Gestión",tableDataSup:[],tableDataTec:[],ContrataBar:y,pieChart:v,pieChart2:D,GestorAgenda:[],GestorOrdenes:[],GestorAgendaId:null,GestorOrdenId:null,Ciudades:[],CiudadId1:null,CiudadId2:null,CiudadId3:null,CiudadId4:null,itemsSup:[{text:"Charts",href:"/"},{text:"Apex",active:!0}],itemsTec:[{text:"Charts",href:"/"},{text:"Apex",active:!0}],totalRowsSup:1,currentPageSup:1,perPageSup:3,pageOptionsSup:[3,10,25,50,100],filterOnSup:[],filterSup:null,sortBySup:"age",sortDescSup:!1,fieldsSup:[],totalRowsTec:1,currentPageTec:1,perPageTec:3,pageOptionsTec:[3,10,25,50,100],filterOnTec:[],filterTec:null,sortByTec:"age",sortDescTec:!1,fieldsTec:[],totalesTec:0,previousTableSupData:{},previousTableTecData:{}}},mounted(){this.totalRowsSup=this.itemsSup.length,this.totalRowsTec=this.itemsTec.length,this.getTableSup(),this.getCity(),this.getTableTec(),this.getContrata(),this.getRatioInstalaciones(),this.getRatioMantenimientos(),setInterval((()=>{this.updateDataIfChanged()}),3e5)},methods:{onFilteredSup(e){this.totalRowsSup=e.length,this.currentPageSup=1},onFilteredTec(e){this.totalRowsTec=e.length,this.currentPageTec=1},async updateDataIfChanged(){console.log("cambios"),await Promise.all([this.UpdategetTableSup(),this.UpdategetTableTec(),this.updateContrata(),this.updateRatioInstalaciones(),this.updateRatioMantenimientos()])},async UpdategetTableSup(){null!=this.CiudadId3&&this.$nextTick((async()=>{const e=await this.$http.get(this.$apiURL+"maintenance/childhoodbreakdownsmanagers/"+this.CiudadId3),t={series:e.data.series,fields:e.data.fields};this.dataChanged(this.previousTableSupData,t)&&(this.tableDataSup.splice(0,this.tableDataSup.length),this.fieldsSup.splice(0,this.fieldsSup.length),e.data.series.map((e=>this.tableDataSup.push({...e}))),e.data.fields.map((e=>this.fieldsSup.push({key:e,sortable:!0}))),this.totalRowsSup=this.tableDataSup.length,this.previousTableSupData=t)}))},async UpdategetTableTec(){null!=this.CiudadId4&&this.$nextTick((async()=>{const e=await this.$http.get(this.$apiURL+"maintenance/childhoodbreakdownstechnicians/"+this.CiudadId4),t={series:e.data.series,fields:e.data.fields};this.dataChanged(this.previousTableTecData,t)&&(this.tableDataTec.splice(0,this.tableDataTec.length),this.fieldsTec.splice(0,this.fieldsTec.length),e.data.series.map((e=>this.tableDataTec.push({...e}))),e.data.fields.map((e=>this.fieldsTec.push({key:e,sortable:!0}))),this.totalRowsTec=this.tableDataTec.length,this.totalesTec=e.data.totales,this.previousTableTecData=t)}))},async updateContrata(){null!=this.CiudadId1&&this.$nextTick((async()=>{const e=await this.$http.get(this.$apiURL+"maintenance/ineffectivecontratagraphic/"+this.CiudadId1),t={series:e.data.series,categories:e.data.categories};this.dataChanged(this.previousContrataData,t)&&(this.previousContrataData={series:this.ContrataBar.series,labels:this.ContrataBar.categories},this.ContrataBar=y,this.ContrataBar.series[0].data=t.series,this.ContrataBar.chartOptions.xaxis.categories=t.categories)}))},async updateRatioInstalaciones(){try{const e=await this.$http.get(this.$apiURL+"maintenance/childhoodbreakdownsgeneral"),t={series:e.data.series,labels:e.data.categories};this.dataChanged(this.previousRatioInstalacionesData,t)&&(this.previousRatioInstalacionesData={series:this.pieChart.series,labels:this.pieChart.categories},this.pieChart=v,this.pieChart.series=t.series,this.pieChart.chartOptions.labels=t.categories)}catch(e){console.error(e)}},async updateRatioMantenimientos(){try{const e=await this.$http.get(this.$apiURL+"maintenance/ineffectivedistributionratiographic"),t={series:e.data.series,labels:e.data.categories};this.dataChanged(this.previousRatioMantenimientoData,t)&&(this.previousRatioMantenimientoData={series:this.pieChart2.series,labels:this.pieChart2.categories},this.pieChart2=D,this.pieChart2.series=t.series,this.pieChart2.chartOptions.labels=t.categories)}catch(e){console.error(e)}},dataChanged(e,t){return void 0!=t&&(console.log(e),console.log(t),JSON.stringify(e)!==JSON.stringify(t))},async getContrata(){null!=this.CiudadId1&&this.$nextTick((async()=>{const e=await this.$http.get(this.$apiURL+"maintenance/ineffectivecontratagraphic/"+this.CiudadId1);this.previousContrataData={series:e.data.series,categories:e.data.categories},this.ContrataBar.series[0].data=e.data.series,this.ContrataBar.chartOptions.xaxis.categories=e.data.categories}))},async getTableSup(){null!=this.CiudadId3&&this.$nextTick((async()=>{this.tableDataSup.splice(0,this.tableDataSup.length),this.fieldsSup.splice(0,this.fieldsSup.length);const e=await this.$http.get(this.$apiURL+"maintenance/childhoodbreakdownsmanagers/"+this.CiudadId3);this.previousTableSupData={series:e.data.series,fields:e.data.fields},e.data.series.map((e=>this.tableDataSup.push({...e}))),e.data.fields.map((e=>this.fieldsSup.push({key:e,sortable:!0}))),this.totalRowsSup=this.tableDataSup.length}))},async getTableTec(){null!=this.CiudadId4&&this.$nextTick((async()=>{this.tableDataTec.splice(0,this.tableDataTec.length),this.fieldsTec.splice(0,this.fieldsTec.length);const e=await this.$http.get(this.$apiURL+"maintenance/childhoodbreakdownstechnicians/"+this.CiudadId4);this.previousTableTecData={series:e.data.series,fields:e.data.fields},e.data.series.map((e=>this.tableDataTec.push({...e}))),e.data.fields.map((e=>this.fieldsTec.push({key:e,sortable:!0}))),this.totalRowsTec=this.tableDataTec.length,this.totalesTec=e.data.totales}))},async getCity(){const e=await this.$http.get(this.$apiURL+"city/all");e.data.data.map((e=>this.Ciudades.push(e.name))),this.CiudadId1=this.Ciudades[0],this.CiudadId2=this.Ciudades[0],this.CiudadId3=this.Ciudades[0],this.CiudadId4=this.Ciudades[0]},async getRatioInstalaciones(){try{const e=await this.$http.get(this.$apiURL+"maintenance/childhoodbreakdownsgeneral");this.previousRatioInstalacionesData={series:e.data.series,labels:e.data.categories},this.pieChart.series=e.data.series,this.pieChart.chartOptions.labels=e.data.categories}catch(e){console.error(e)}},async getRatioMantenimientos(){try{this.pieChart2=D;const e=await this.$http.get(this.$apiURL+"maintenance/ineffectivedistributionratiographic");this.previousRatioMantenimientoData={series:e.data.series,labels:e.data.categories},this.pieChart2.series=e.data.series,this.pieChart2.chartOptions.labels=e.data.categories}catch(e){console.error(e)}}},middleware:"authentication"},R=a(3744);const k=(0,R.Z)(I,[["render",w]]);var U=k}}]);
//# sourceMappingURL=659.f44ed085.js.map