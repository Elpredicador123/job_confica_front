"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[41],{1022:function(e,t,a){a.d(t,{Z:function(){return u}});var s=a(6252),r=a(3577);const i={class:"page-title-box d-flex align-items-center justify-content-between"},l={class:"mb-0"},n={class:"page-title-right"};function o(e,t,a,o,d,c){const m=(0,s.up)("b-breadcrumb"),u=(0,s.up)("BCol"),f=(0,s.up)("BRow");return(0,s.wg)(),(0,s.j4)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(u,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s._)("h4",l,(0,r.zw)(a.title),1),(0,s._)("div",n,[(0,s.Wm)(m,{items:a.items,class:"m-0"},null,8,["items"])])])])),_:1})])),_:1})}var d={props:{title:{type:String,default:""},items:{type:Array,default:()=>[]}}},c=a(3744);const m=(0,c.Z)(d,[["render",o]]);var u=m},566:function(e,t,a){a.r(t),a.d(t,{default:function(){return G}});var s=a(6252),r=a(3577);const i=(0,s._)("i",{class:"bx bx-check-circle"},null,-1),l={class:"table-responsive mb-0"},n=(0,s._)("i",{class:"bx bx-check-circle"},null,-1),o={class:"table-responsive mb-0"},d={class:"row"},c=(0,s._)("i",{class:"bx bx-check-circle"},null,-1),m={class:"table-responsive mb-0"},u=(0,s._)("i",{class:"bx bx-check-circle"},null,-1),f={class:"table-responsive mb-0"};function p(e,t,a,p,g,h){const b=(0,s.up)("PageHeader"),O=(0,s.up)("BCol"),w=(0,s.up)("BRow"),_=(0,s.up)("BCardHeader"),y=(0,s.up)("BFormSelect"),G=(0,s.up)("BTable"),W=(0,s.up)("BCardBody"),I=(0,s.up)("BCard"),D=(0,s.up)("BButton"),k=(0,s.up)("Layout");return(0,s.wg)(),(0,s.j4)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,{title:g.title,items:g.items},null,8,["title","items"]),(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(O,{lg:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(O,{sm:"7"},{default:(0,s.w5)((()=>[i,(0,s.Uk)("   Avance instalaciones ")])),_:1}),(0,s.Wm)(O,{sm:"5"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Actualizado a las "+(0,r.zw)(g.dataDateInstalaciones),1)])),_:1})])),_:1})])),_:1}),(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(O,{cols:"7"}),(0,s.Wm)(O,{cols:"5"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Filtrar por: "),(0,s.Wm)(y,{modelValue:g.ciudadId,"onUpdate:modelValue":t[0]||(t[0]=e=>g.ciudadId=e),size:"sm",options:g.Ciudades,onChange:t[1]||(t[1]=e=>h.getTableInstalaciones())},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,s._)("div",l,[(0,s.Wm)(G,{items:g.TableInstalaciones,fields:g.fields,responsive:"sm","per-page":g.perPage,"current-page":g.currentPage,"sort-by":g.sortBy,"sort-desc":g.sortDesc,filter:g.filter,"filter-included-fields":g.filterOn,onFiltered:e.onFiltered},null,8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(O,{lg:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(O,{sm:"7"},{default:(0,s.w5)((()=>[n,(0,s.Uk)("   Ordenes por gestor instalaciones ")])),_:1}),(0,s.Wm)(O,{sm:"5"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Actualizado a las "+(0,r.zw)(g.dataDateGestor),1)])),_:1})])),_:1})])),_:1}),(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(O,{cols:"7"}),(0,s.Wm)(O,{cols:"5"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Filtrar por: "),(0,s.Wm)(y,{modelValue:g.GestorAgendaId,"onUpdate:modelValue":t[2]||(t[2]=e=>g.GestorAgendaId=e),size:"sm",options:g.GestorAgenda,onChange:t[3]||(t[3]=e=>h.getTableGestor())},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,s._)("div",o,[(0,s.Wm)(G,{items:g.tableDataGestor,fields:g.fieldsGestor,responsive:"sm","per-page":g.perPageGestor,"current-page":g.currentPageGestor,"sort-by":g.sortByGestor,"sort-desc":g.sortDescGestor,filter:g.filterGestor,"filter-included-fields":g.filterOnGestor,onFiltered:e.onFilteredGestor},null,8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,s._)("div",d,[(0,s.Wm)(O,{lg:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(O,{sm:"7"},{default:(0,s.w5)((()=>[c,(0,s.Uk)("   Avance Mantenimientos ")])),_:1}),(0,s.Wm)(O,{sm:"5"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Actualizado a las "+(0,r.zw)(g.dataDateMantenimientos),1)])),_:1})])),_:1})])),_:1}),(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(O,{cols:"7"}),(0,s.Wm)(O,{cols:"5"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Filtrar por: "),(0,s.Wm)(y,{modelValue:g.ciudadId2,"onUpdate:modelValue":t[4]||(t[4]=e=>g.ciudadId2=e),size:"sm",options:g.Ciudades,onChange:t[5]||(t[5]=e=>h.getTableMantenimientos())},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,s._)("div",m,[(0,s.Wm)(G,{items:g.tableMantenimiento,fields:g.fieldsMantenimiento,responsive:"sm","per-page":g.perPage2,"current-page":g.currentPage2,"sort-by":g.sortBy2,"sort-desc":g.sortDesc2,filter:g.filter2,"filter-included-fields":g.filterOn2,onFiltered:e.onFiltered},null,8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(O,{lg:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(O,{sm:"7"},{default:(0,s.w5)((()=>[u,(0,s.Uk)("   Ordenes por gestor - horas pendientes ")])),_:1}),(0,s.Wm)(O,{sm:"5"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Actualizado a las "+(0,r.zw)(g.dataDateOrder),1)])),_:1})])),_:1})])),_:1}),(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(O,{cols:"8"}),(0,s.Wm)(O,{cols:"4"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Filtrar por: "),(0,s.Wm)(y,{modelValue:g.OrdenesGestorId,"onUpdate:modelValue":t[6]||(t[6]=e=>g.OrdenesGestorId=e),size:"sm",options:g.OrdenesGestor,onChange:t[7]||(t[7]=e=>h.getTableOrder())},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,s._)("div",f,[(0,s.Wm)(G,{items:g.tableDataOrder,fields:g.fieldsOrder,responsive:"sm","per-page":g.perPageOrder,"current-page":g.currentPageOrder,"sort-by":g.sortByOrder,"sort-desc":g.sortDescOrder,filter:g.filterOrder,"filter-included-fields":g.filterOnOrder,onFiltered:e.onFilteredOrder},{"cell(button)":(0,s.w5)((e=>[(0,s.Wm)(D,{variant:h.getColor(e.item["Tiempo sin atención"]),size:"sm"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Validar ")])),_:2},1032,["variant"])])),_:1},8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])])])),_:1})])),_:1})])),_:1})])])),_:1})}a(560);var g=a(4642),h=a(1022),b=a(381),O=a.n(b),w={components:{Layout:g.Z,PageHeader:h.Z},data(){return{title:"Gestión",TableInstalaciones:[],tableMantenimiento:[],tableDataGestor:[],tableDataOrder:[],GestorAgenda:[],Ciudades:[],ciudadId:"Lima",ciudadId2:"Lima",OrdenesGestor:[],GestorOrdenes:[],GestorAgendaId:null,OrdenesGestorId:null,GestorOrdenId:null,items:[{text:"Gestión",href:"/"},{text:"Listadp",active:!0}],dataDateInstalaciones:null,currentPage:1,perPage:20,pageOptions:[10,25,50,100],filter:null,filterOn:[],sortBy:"age",sortDesc:!1,fields:[],dataDateMantenimientos:null,currentPage2:1,perPage2:20,pageOptions2:[10,25,50,100],filter2:null,filterOn2:[],sortBy2:"age",sortDesc2:!1,fieldsMantenimiento:[],dataDateGestor:null,currentPageGestor:1,perPageGestor:20,pageOptionsGestor:[10,25,50,100],filterOnGestor:[],filterGestor:null,sortByGestor:"age",sortDescGestor:!1,fieldsGestor:[],dataDateOrder:null,currentPageOrder:1,perPageOrder:20,pageOptionsOrder:[10,25,50,100],filterOnOrder:[],filterOrder:null,sortByOrder:"age",sortDescOrder:!1,fieldsOrder:[],totalesOrder:0,previousTableMantenimientosData:{},previousTableInstalacionesData:{},previousTableGestorData:{},previousTableOrderData:{}}},mounted(){this.getCity(),this.getGestorAgenda(),this.getOrdenesGestor()},methods:{formatearHora(e){return e?O()(e,"DD/MM/YYYY HH:mm:ss").format("HH:mm:ss"):""},async fetchData(e,t=4e3){try{const a=this.$http.get(this.$apiURL+e),s=new Promise(((e,a)=>setTimeout((()=>a(new Error("Timeout"))),t))),r=await Promise.race([a,s]);return r.data}catch(a){return null}},async getGestorAgenda(){try{const e=await this.fetchData("manager/managersaltas");e&&e.data?(e.data.map((e=>this.GestorAgenda.push(e.manager))),this.GestorAgendaId=this.GestorAgenda[0]):this.GestorAgendaId="",this.getTableGestor()}catch(e){console.error(e)}},async getCity(){try{const e=await this.fetchData("city/all");e&&e.data?(e.data.forEach((e=>this.Ciudades.push(e.name))),this.ciudadId=this.Ciudades[0],this.ciudadId2=this.Ciudades[0]):(this.ciudadId="Lima",this.ciudadId2="Lima"),this.getTableInstalaciones(),this.getTableMantenimientos()}catch(e){console.error(e)}},async getOrdenesGestor(){try{const e=await this.fetchData("manager/managersaverias");e&&e.data?(e.data.forEach((e=>this.OrdenesGestor.push(e.manager))),this.OrdenesGestorId=this.OrdenesGestor[0]):this.OrdenesGestorId="",this.getTableOrder()}catch(e){console.error(e)}},async getTableMantenimientos(){try{null!=this.ciudadId2&&this.$nextTick((async()=>{this.tableMantenimiento.splice(0,this.tableMantenimiento.length),this.fieldsMantenimiento.splice(0,this.fieldsMantenimiento.length);const e=4e3,t=this.$http.get(this.$apiURL+"management/maintenanceprogresstable/"+this.ciudadId2),a=new Promise((t=>setTimeout(t,e))),s=await Promise.race([t,a]);if(s&&s.data.series&&s.data.fields)s.data.series.map((e=>this.tableMantenimiento.push({...e}))),s.data.fields.map((e=>this.fieldsMantenimiento.push({key:e,sortable:!0}))),this.dataDateMantenimientos=this.formatearHora(s.data.date),localStorage.setItem("maintenance_progress_table",JSON.stringify(s));else{const e=JSON.parse(localStorage.getItem("maintenance_progress_table"));console.log(e),e&&(e.data.series.map((e=>this.tableMantenimiento.push({...e}))),e.data.fields.map((e=>this.fieldsMantenimiento.push({key:e,sortable:!0}))),this.dataDateMantenimientos=this.formatearHora(e.data.date))}}))}catch(e){console.error(e)}},async getTableInstalaciones(){try{null!=this.ciudadId&&this.$nextTick((async()=>{this.TableInstalaciones.splice(0,this.TableInstalaciones.length),this.fields.splice(0,this.fields.length);const e=4e3,t=this.$http.get(this.$apiURL+"management/installationprogresstable/"+this.ciudadId),a=new Promise((t=>setTimeout(t,e))),s=await Promise.race([t,a]);if(console.log(s),s&&s.data.series&&s.data.fields)s.data.series.map((e=>this.TableInstalaciones.push({...e}))),s.data.fields.map((e=>this.fields.push({key:e,sortable:!0}))),this.dataDateInstalaciones=this.formatearHora(s.data.date),localStorage.setItem("installation_progress_table",JSON.stringify(s));else{const e=JSON.parse(localStorage.getItem("installation_progress_table"));e&&(e.data.series.map((e=>this.TableInstalaciones.push({...e}))),e.data.fields.map((e=>this.fields.push({key:e,sortable:!0}))),this.dataDateInstalaciones=this.formatearHora(e.data.date))}}))}catch(e){console.error(e)}},async getTableGestor(){try{null!=this.GestorAgendaId&&this.$nextTick((async()=>{this.tableDataGestor.splice(0,this.tableDataGestor.length),this.fieldsGestor.splice(0,this.fieldsGestor.length);const e=4e3,t=this.$http.get(this.$apiURL+"management/installationlogmanagertable/"+this.GestorAgendaId),a=new Promise((t=>setTimeout(t,e))),s=await Promise.race([t,a]);if(s&&s.data.series&&s.data.categories)s.data.series.map((e=>this.tableDataGestor.push({...e}))),s.data.categories.map((e=>this.fieldsGestor.push({key:e,sortable:!0}))),this.dataDateGestor=this.formatearHora(s.data.date),localStorage.setItem("installation_manager_table",JSON.stringify(s));else{const e=JSON.parse(localStorage.getItem("installation_manager_table"));e&&(e.data.series.map((e=>this.tableDataGestor.push({...e}))),e.data.categories.map((e=>this.fieldsGestor.push({key:e,sortable:!0}))),this.dataDateGestor=this.formatearHora(e.data.date))}}))}catch(e){console.error(e)}},async getTableOrder(){try{null!=this.OrdenesGestorId&&this.$nextTick((async()=>{this.tableDataOrder.splice(0,this.tableDataOrder.length),this.fieldsOrder.splice(0,this.fieldsOrder.length);const e=4e3,t=this.$http.get(this.$apiURL+"management/ordermanagertable/"+this.OrdenesGestorId),a=new Promise((t=>setTimeout(t,e))),s=await Promise.race([t,a]);if(s&&s.data.series&&s.data.categories)s.data.series.map((e=>this.tableDataOrder.push({...e}))),s.data.categories.map((e=>this.fieldsOrder.push({key:e,sortable:!0}))),this.dataDateOrder=this.formatearHora(s.data.date),localStorage.setItem("order_manager_table",JSON.stringify(s));else{const e=JSON.parse(localStorage.getItem("order_manager_table"));e&&(e.data.series.map((e=>this.tableDataOrder.push({...e}))),e.data.categories.map((e=>this.fieldsOrder.push({key:e,sortable:!0}))),this.dataDateOrder=this.formatearHora(e.data.date))}}))}catch(e){console.error(e)}},getColor(e){return console.log(e),"success"}},middleware:"authentication"},_=a(3744);const y=(0,_.Z)(w,[["render",p]]);var G=y}}]);
//# sourceMappingURL=41.9285f17a.js.map