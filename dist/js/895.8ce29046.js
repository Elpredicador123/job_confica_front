"use strict";(self["webpackChunkminible"]=self["webpackChunkminible"]||[]).push([[895],{1022:function(e,l,t){t.d(l,{Z:function(){return p}});var s=t(6252),a=t(3577);const r={class:"page-title-box d-flex align-items-center justify-content-between"},o={class:"mb-0"},i={class:"page-title-right"};function n(e,l,t,n,d,u){const m=(0,s.up)("b-breadcrumb"),p=(0,s.up)("BCol"),c=(0,s.up)("BRow");return(0,s.wg)(),(0,s.j4)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("h4",o,(0,a.zw)(t.title),1),(0,s._)("div",i,[(0,s.Wm)(m,{items:t.items,class:"m-0"},null,8,["items"])])])])),_:1})])),_:1})}var d={props:{title:{type:String,default:""},items:{type:Array,default:()=>[]}}},u=t(3744);const m=(0,u.Z)(d,[["render",n]]);var p=m},2686:function(e,l,t){t.r(l),t.d(l,{default:function(){return L}});var s=t(6252);const a=(0,s._)("i",{class:"bx bx-check-circle"},null,-1),r={id:"tickets-table_length",class:"dataTables_length"},o={class:"d-inline-flex align-items-center"},i={class:"col-sm-12 col-md-6"},n={id:"tickets-table_filter",class:"dataTables_filter text-md-end"},d={class:"d-inline-flex align-items-center"},u={class:"table-responsive mb-0"},m={class:"dataTables_paginate paging_simple_numbers float-end"},p={class:"pagination pagination-rounded mb-0"};function c(e,l,t,c,f,h){const w=(0,s.up)("PageHeader"),g=(0,s.up)("BCol"),b=(0,s.up)("BRow"),_=(0,s.up)("BCardHeader"),U=(0,s.up)("BFormSelect"),W=(0,s.up)("BFormInput"),y=(0,s.up)("BButton"),v=(0,s.up)("BTable"),V=(0,s.up)("BPagination"),k=(0,s.up)("BCardBody"),C=(0,s.up)("BCard"),P=(0,s.up)("UserModal"),B=(0,s.up)("Layout");return(0,s.wg)(),(0,s.j4)(B,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,{title:e.title,items:e.items},null,8,["title","items"]),(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Wm)(g,{cols:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Wm)(g,{sm:"7"},{default:(0,s.w5)((()=>[a,(0,s.Uk)("   Listado de usuarios ")])),_:1})])),_:1})])),_:1}),(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,{class:"mt-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{sm:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("label",o,[(0,s.Uk)(" Show  "),(0,s.Wm)(U,{modelValue:f.perPageUser,"onUpdate:modelValue":l[0]||(l[0]=e=>f.perPageUser=e),size:"sm",options:f.pageOptionsUser},null,8,["modelValue","options"]),(0,s.Uk)(" entries ")])])])),_:1}),(0,s._)("div",i,[(0,s._)("div",n,[(0,s._)("label",d,[(0,s.Uk)(" Search: "),(0,s.Wm)(W,{modelValue:f.filterUser,"onUpdate:modelValue":l[1]||(l[1]=e=>f.filterUser=e),type:"search",placeholder:"Search...",class:"form-control form-control-sm ms-2"},null,8,["modelValue"])])])])])),_:1}),(0,s._)("div",u,[(0,s.Wm)(v,{items:f.tableDataUser,fields:f.fieldsUser,responsive:"sm","per-page":f.perPageUser,"current-page":f.currentPageUser,"sort-by":f.sortByUser,"sort-desc":f.sortDescUser,filter:f.filterUser,"filter-included-fields":f.filterOnUser,onFiltered:h.onFilteredUser},{"cell(actions)":(0,s.w5)((({item:e})=>[(0,s.Wm)(y,{onClick:l=>h.editItem(e),variant:"info"},{default:(0,s.w5)((()=>[(0,s.Uk)("Editar")])),_:2},1032,["onClick"])])),_:1},8,["items","fields","per-page","current-page","sort-by","sort-desc","filter","filter-included-fields","onFiltered"])]),(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s._)("ul",p,[(0,s.Wm)(V,{modelValue:f.currentPageUser,"onUpdate:modelValue":l[2]||(l[2]=e=>f.currentPageUser=e),"total-rows":f.totalRowsUser,"per-page":f.perPageUser},null,8,["modelValue","total-rows","per-page"])])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(P,{ref:"UserModal"},null,512)])),_:1})}t(560);var f=t(4642),h=t(1022),w=t(9963),g=t(3577);const b=(0,s._)("i",{class:"bx bx-check-circle"},null,-1),_={class:"mt-4"},U={class:"mt-4"},W={class:"mt-4"},y={class:"mt-4"},v={class:"mt-4"},V={class:"mt-4"},k={class:"mt-4"},C={class:"input-group"},P={class:"mt-4"},B={class:"mt-3 text-end"};function A(e,l,t,a,r,o){const i=(0,s.up)("BCol"),n=(0,s.up)("BRow"),d=(0,s.up)("BCardHeader"),u=(0,s.up)("BFormInput"),m=(0,s.up)("BFormGroup"),p=(0,s.up)("BButton"),c=(0,s.up)("BInputGroupAppend"),f=(0,s.up)("Multiselect"),h=(0,s.up)("BCardBody"),A=(0,s.up)("BCard"),I=(0,s.up)("BModal");return(0,s.wg)(),(0,s.j4)(I,{modelValue:r.isOpen,"onUpdate:modelValue":l[13]||(l[13]=e=>r.isOpen=e),size:"xl","hide-footer":""},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{cols:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{"no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{style:{padding:"1em","background-color":"#5b73e8",color:"#ffff !important"}},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{sm:"7"},{default:(0,s.w5)((()=>[b,(0,s.Uk)("   Editar usuario ")])),_:1})])),_:1})])),_:1}),(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s._)("form",{autocomplete:"off",class:"row no-gutters",onSubmit:l[12]||(l[12]=(0,w.iM)(((...l)=>e.submit&&e.submit(...l)),["prevent"]))},[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",_,[(0,s.Wm)(m,{id:"email-group",label:"Nombre Completo",class:"mb-3","label-for":"name"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{id:"name",modelValue:r.user.Nombres,"onUpdate:modelValue":l[0]||(l[0]=e=>r.user.Nombres=e),type:"text",required:"",placeholder:"Ingresar Nombres",onInput:l[1]||(l[1]=e=>o.generateUsername())},null,8,["modelValue"])])),_:1})])])),_:1}),(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",U,[(0,s.Wm)(m,{id:"email-group",label:"Apellido Paterno",class:"mb-3","label-for":"paterno"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{id:"paterno",modelValue:r.user.Apellido_Paterno,"onUpdate:modelValue":l[2]||(l[2]=e=>r.user.Apellido_Paterno=e),type:"text",required:"",placeholder:"Ingresar Apellido Paterno",onInput:l[3]||(l[3]=e=>o.generateUsername())},null,8,["modelValue"])])),_:1})])])),_:1}),(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",W,[(0,s.Wm)(m,{id:"email-group",label:"Apellido Materno",class:"mb-3","label-for":"materno"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{id:"materno",modelValue:r.user.Apellido_Materno,"onUpdate:modelValue":l[4]||(l[4]=e=>r.user.Apellido_Materno=e),type:"text",required:"",placeholder:"Ingresar Apellido Materno"},null,8,["modelValue"])])),_:1})])])),_:1}),(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",y,[(0,s.Wm)(m,{id:"email-group",label:"DNI",class:"mb-3","label-for":"dni"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{id:"dni",modelValue:r.user.Dni,"onUpdate:modelValue":l[5]||(l[5]=e=>r.user.Dni=e),type:"text",placeholder:"Ingresar DNI",required:"",onInput:l[6]||(l[6]=e=>o.generateUsername())},null,8,["modelValue"])])),_:1})])])),_:1}),(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",v,[(0,s.Wm)(m,{label:"Correo","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{id:"email",modelValue:r.user.email,"onUpdate:modelValue":l[7]||(l[7]=e=>r.user.email=e),type:"email",placeholder:"Ingresar Correo",required:""},null,8,["modelValue"])])),_:1})])])),_:1}),(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",V,[(0,s.Wm)(m,{id:"email-group",label:"Usuario",class:"mb-3","label-for":"username"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{id:"username",modelValue:r.user.username,"onUpdate:modelValue":l[8]||(l[8]=e=>r.user.username=e),type:"text",placeholder:"Ingresar usuario",required:""},null,8,["modelValue"])])),_:1})])])),_:1}),(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",k,[(0,s.Wm)(m,{id:"password-group",label:"Contraseña",class:"mb-3","label-for":"password"},{default:(0,s.w5)((()=>[(0,s._)("div",C,[(0,s.Wm)(u,{id:"password",modelValue:r.user.password,"onUpdate:modelValue":l[9]||(l[9]=e=>r.user.password=e),type:r.showPassword?"text":"password",placeholder:"Ingresar contraseña",class:(0,g.C_)({"is-invalid":r.submitted&&a.v$.user.password.$error})},null,8,["modelValue","type","class"]),(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,{variant:"outline-secondary",onClick:l[10]||(l[10]=e=>r.showPassword=!r.showPassword)},{default:(0,s.w5)((()=>[(0,s._)("i",{class:(0,g.C_)("bx "+(r.showPassword?"bx-show":"bx-hide"))},null,2)])),_:1})])),_:1})]),(0,s.Wm)(p,{variant:"secondary",onClick:o.generatePassword},{default:(0,s.w5)((()=>[(0,s.Uk)("Generar Contraseña")])),_:1},8,["onClick"])])),_:1})])])),_:1}),(0,s.Wm)(i,{lg:"3"},{default:(0,s.w5)((()=>[(0,s._)("div",P,[(0,s.Wm)(m,{label:"Rol","label-for":"formrow-firstname-input",class:"mb-12"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{modelValue:r.user.role_id,"onUpdate:modelValue":l[11]||(l[11]=e=>r.user.role_id=e),required:"",options:r.roles.map((e=>({value:e.id,label:e.description}))),class:"form-control p-0"},null,8,["modelValue","options"])])),_:1})])])),_:1})])),_:1}),(0,s._)("div",B,[(0,s.Wm)(p,{variant:"primary",class:"w-sm",onClick:o.tryToRegisterIn},{default:(0,s.w5)((()=>[(0,s.Uk)("Actualizar ")])),_:1},8,["onClick"])])],32)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}var I=t(5705),M=t(760),$=t(7091),R={components:{Multiselect:$.Z},setup(){return{v$:(0,I.Xw)()}},data(){return{isOpen:!1,user:{},passwordGenerated:!1,showPassword:!1,roles:[],rol:null,submitted:!1,tryingToRegister:!1,isRegisterError:!1,title:"NUEVO USUARIO"}},validations(){return{user:{username:{required:M.C1},password:{required:M.C1,strongPassword:this.strongPassword}}}},computed:{notification(){return this.$store?this.$store.state.notification:null},notificationAutoCloseDuration(){return this.$store&&this.$store.state.notification?5:0}},mounted(){this.initForm(),this.getRol()},methods:{generateUsername(){if(this.user.Nombres&&this.user.Apellido_Paterno&&this.user.Dni){const e=this.user.Nombres.charAt(0),l=this.user.Apellido_Paterno,t=this.user.Dni.slice(0,2);this.user.username=`${e}${l}${t}`.toLowerCase()}},generatePassword(){const e="abcdefghijklmnopqrstuvwxyz",l="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="0123456789",s="!@#$%^&*";let a="";a+=e[Math.floor(Math.random()*e.length)],a+=l[Math.floor(Math.random()*l.length)],a+=t[Math.floor(Math.random()*t.length)],a+=s[Math.floor(Math.random()*s.length)];const r=e+l+t+s;for(let o=a.length;o<10;o++)a+=r[Math.floor(Math.random()*r.length)];a=a.split("").sort((()=>.5-Math.random())).join(""),this.user.password=a,this.passwordGenerated=!0},strongPassword(e){const l=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;return l.test(e)},initForm(){this.user={username:"user.name",Nombres:null,Apellido_Paterno:null,Apellido_Materno:null,Dni:null,password:"",role_id:"",email:null,Nacimiento:null}},async getRol(){try{const e=await this.$http.get(this.$apiURL+"role/all"),l=e.data.data;l.forEach((e=>{this.roles.push(e)})),console.log(this.roles)}catch(e){console.error("Error fetching roles:",e)}},open(e){console.log(e),this.isOpen=!0;const{rol:l,...t}=e;this.rol=l,this.user={...t}},saveChanges(){this.$emit("edit-complete",this.selectedItem),this.close()},close(){this.isOpen=!1,this.selectedItem=null},tryToRegisterIn(){this.submitted=!0,this.v$.$touch(),this.user.password,this.user.password&&(console.log("no"),this.v$.$invalid)||this.$http.put(this.$apiURL+"user/update/"+this.user.id,this.user,{}).then((e=>{200==e.status&&(this.$swal({title:"Completado!",text:e.data.message,icon:"success",confirmButtonColor:"#6457A2"}),setTimeout((()=>{window.location.reload()}),2e3))})).catch((e=>{console.error(e),this.$swal({icon:"error",title:"Oops...",text:e})}))}}},x=t(3744);const O=(0,x.Z)(R,[["render",A]]);var D=O,N={components:{Layout:f.Z,PageHeader:h.Z,UserModal:D},data(){return{itemsUser:[{text:"Charts",href:"/"},{text:"Apex",active:!0}],tableDataUser:[],totalRowsUser:1,currentPageUser:1,perPageUser:25,pageOptionsUser:[10,25,50,100],filterOnUser:[],filterUser:null,sortByUser:"age",sortDescUser:!1,fieldsUser:[{key:"id",label:"ID",sortable:!0},{key:"username",label:"USUARIO",sortable:!0},{key:"Nombres",label:"NOMBRES",sortable:!0},{key:"Apellido_Paterno",label:"APELLIDO PATERNO",sortable:!0},{key:"Apellido_Materno",label:"APELLIDO MATERNO",sortable:!0},{key:"Dni",label:"DNI",sortable:!0},{key:"email",label:"CORREO",sortable:!0},{key:"rol",label:"ROL",sortable:!0},{key:"actions",sortable:!0}]}},mounted(){this.totalRowsUser=this.itemsUser.length,this.getTableUser()},methods:{onFilteredUser(e){this.totalRowsUser=e.length,this.currentPageUser=1},async getTableUser(){console.log("hola");try{const e=await this.$http.get(this.$apiURL+"user/all");console.log(e),e.data.data.map((e=>this.tableDataUser.push({...e}))),this.totalRowsUser=this.tableDataUser.length}catch(e){console.error(e)}},editItem(e){console.log("Editar item",e),this.selectedItem=JSON.parse(JSON.stringify(e)),this.$refs.UserModal.open(this.selectedItem)}},middleware:"authentication"};const E=(0,x.Z)(N,[["render",c]]);var L=E}}]);
//# sourceMappingURL=895.8ce29046.js.map